"function"==typeof define&&define.amd&&define("css",[],function(){return{load:function(t,e,i){i()}}}),function(t,e){"function"==typeof define&&define.amd?define("chart/Axis.js",["d3","../common/SVGWidget","../common/Utility","css!./Axis"],e):t.chart_Axis=e(t.d3,t.common_SVGWidget,t.common_Utility)}(this,function(t,e,i){function o(){e.call(this),this._drawStartPos="origin",this.d3Axis=t.svg.axis(),this.d3Guides=t.svg.axis(),this.updateScale()}o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.prototype._class+=" chart_Axis",o.prototype.publish("title","","string","Title"),o.prototype.publish("orientation","bottom","set","Orientation",["left","top","right","bottom"]),o.prototype.publish("type","linear","set","Type",["none","ordinal","linear","pow","log","time"]),o.prototype.publish("timePattern","%Y-%m-%d","string","Time Series Pattern",null,{disable:function(t){return"time"!==t.type()}}),o.prototype.publish("powExponent",2,"number","Exponent for Pow on Value Axis",null,{disable:function(t){return"pow"!==t.type()}}),o.prototype.publish("logBase",10,"number","Base for log on Value Axis",null,{disable:function(t){return"log"!==t.type()}}),o.prototype.publish("ordinals",[],"array","Ordinal Values",null,{disable:function(t){return"ordinal"!==t.type()}}),o.prototype.publish("tickCount",null,"number","Tick Count",null,{optional:!0,disable:function(t){return"ordinal"===t.type()}}),o.prototype.publish("tickFormat",null,"string","Tick Format",null,{optional:!0,disable:function(t){return"ordinal"===t.type()}}),o.prototype.publish("tickLength",null,"number","Tick Length",{optional:!0}),o.prototype.publish("low",null,"any","Low",null,{optional:!0,disable:function(t){return"ordinal"===t.type()}}),o.prototype.publish("high",null,"any","High",null,{optional:!0,disable:function(t){return"ordinal"===t.type()}}),o.prototype.publish("overlapMode","none","set","Label Overlap Mode",["none","stagger","hide","rotate","linebreak","wrap"]),o.prototype.publish("labelRotation",33,"number","Label Rotation",null,{optional:!0,disable:function(t){return"rotate"!==t.overlapMode()}}),o.prototype.publish("shrinkToFit","both","set","Size to fit",["none","low","high","both"]),o.prototype.publish("extend",5,"number","Extend axis %",{optional:!0,disable:function(t){return"ordinal"===t.type()}});var a=o.prototype.type;o.prototype.type=function(t){var e=a.apply(this,arguments);return arguments.length&&this.updateScale(),e};var n=o.prototype.timePattern;return o.prototype.timePattern=function(t){var e=n.apply(this,arguments);return arguments.length&&this.updateScale(),e},o.prototype.lowValue=function(){return this.parse(this.low())},o.prototype.highValue=function(){return this.parse(this.high())},o.prototype.parse=function(t,e){if(t instanceof Array)return t.map(function(t){return this.parse(t)},this);if(void 0!==t&&null!==t){if(this.parser)return this.parser.parse("number"==typeof t?t.toString():t);if(e&&"string"==typeof t)return+t}return t},o.prototype.parseInvert=function(t){return t instanceof Array?t.map(function(t){return this.parseInvert(t)},this):this.parser&&t?this.parser(t):t},o.prototype.format=function(t){return t instanceof Array?t.map(function(t){return this.format(t)},this):void 0!==t&&null!==t&&this.formatter?this.formatter(t):t},o.prototype.scalePos=function(t){var e=this.d3Scale(this.parse(t));return"ordinal"===this.type()&&(e+=this.d3Scale.rangeBand()/2),e},o.prototype.isHorizontal=function(){switch(this.orientation()){case"left":case"right":return!1}return!0},o.prototype.domain=function(t){return arguments.length?(this.d3Scale.domain(t),this):this.d3Scale.domain()},o.prototype.range=function(t){if(!arguments.length){if(this.d3Scale.rangeRoundBands)return this.d3Scale.rangeExtent();if(this.d3Scale.rangeRound)return this.d3Scale.range()}return this.d3Scale.rangeRoundBands?this.d3Scale.rangeRoundBands(t,.1):this.d3Scale.rangeRound&&this.d3Scale.range(t),this},o.prototype.invert=function(t){return this.d3Scale.invert(t)},o.prototype.guideTarget=function(e){this._guideElement=t.select(e).attr("class",this._class)},o.prototype.enter=function(t,i){e.prototype.enter.apply(this,arguments),this.svg=i.append("g"),this.svgAxis=this.svg.append("g").attr("class","axis"),this.svgText=this.svgAxis.append("text"),this.svg2=(this._guideElement||i).append("g"),this.svgGuides=this.svg2.attr("class","guide")},o.prototype.updateScale=function(){switch(this.type()){case"ordinal":this.d3Scale=t.scale.ordinal(),this.ordinals_exists()&&this.d3Scale.domain(this.ordinals()),this.parser=null,this.formatter=null;break;case"linear":this.d3Scale=t.scale.linear(),this.low_exists()&&this.high_exists()&&this.d3Scale.domain([this.lowValue(),this.highValue()]),this.parser=null,this.formatter=this.tickFormat_exists()?t.format(this.tickFormat()):null;break;case"pow":this.d3Scale=t.scale.pow().exponent(this.powExponent()),this.low_exists()&&this.high_exists()&&this.d3Scale.domain([this.lowValue(),this.highValue()]),this.parser=null,this.formatter=this.tickFormat_exists()?t.format(this.tickFormat()):null;break;case"log":this.d3Scale=t.scale.log().base(this.logBase()),this.low_exists()&&this.high_exists()&&this.d3Scale.domain([this.lowValue(),this.highValue()]),this.parser=null,this.formatter=this.tickFormat_exists()?t.format(this.tickFormat()):null;break;case"time":this.d3Scale=t.time.scale(),this.low_exists()&&this.high_exists()&&this.d3Scale.domain([this.lowValue(),this.highValue()]),this.parser=this.timePattern_exists()?t.time.format(this.timePattern()):null,this.formatter=this.tickFormat_exists()?t.time.format(this.tickFormat()):null}if(this.extend())switch(this.type()){case"ordinal":break;default:var e,i,o,a,n,r;this.isHorizontal()?(e=this.width(),this.d3Scale.range([0,e]),i=e*this.extend()/100,o=this.d3Scale.invert(0),n=this.d3Scale.invert(-i),a=this.d3Scale.invert(e),r=this.d3Scale.invert(e+i)):(e=this.height(),this.d3Scale.range([e,0]),i=e*this.extend()/100,o=this.d3Scale.invert(e),n=this.d3Scale.invert(e+i),a=this.d3Scale.invert(0),r=this.d3Scale.invert(-i)),Math.sign(o)!==Math.sign(n)&&(n=0),Math.sign(a)!==Math.sign(r)&&(r=0),this.d3Scale.domain([n,r])}this.d3Axis.orient(this.orientation()).scale(this.d3Scale).tickFormat(this.formatter).ticks(this.tickCount()),this.d3Guides.orient(this.orientation()).scale(this.d3Scale).tickSize(-this.tickLength()).tickFormat("").ticks(this.tickCount())},o.prototype.adjustText=function(e,i){var o=this.isHorizontal(),a="left"===this.orientation(),n="bottom"===this.orientation(),r=this;if("linebreak"===this.overlapMode())"ordinal"===this.type()&&e.selectAll(".tick > text").call(function(){return r.linebreak.apply(r,arguments)},this.d3Scale.rangeBand());else if("wrap"===this.overlapMode())"ordinal"===this.type()&&e.selectAll(".tick > text").call(function(){return r.wrap.apply(r,arguments)},this.d3Scale.rangeBand());else switch(o?this.overlapMode():"none"){case"stagger":e.selectAll(".tick > text").style("text-anchor","middle").attr("dy",function(t,e){return(n?1:-1)*((n?.71:0)+e%i)+"em"}).attr("dx",0).attr("visibility",null).attr("transform","rotate(0)");break;case"hide":e.selectAll(".tick > text").style("text-anchor","middle").attr("dy",(n?.71:0)+"em").attr("dx",0).attr("visibility",function(t,e){return e%i?"hidden":null}).attr("transform","rotate(0)");break;case"rotate":var s=-this.labelRotation()||0;if(0!==s&&i>1){e.selectAll(".tick > text").each(function(){var e=t.select(this),i=e.node().getBBox(),o=(n?1:-1)*Math.sin(Math.PI*(-Math.abs(s)/180));e.style("text-anchor",s>0?n?"start":"end":n?"end":"start").attr("dy",i.height/2*o+"px").attr("dx",s>0?n?"0.71em":"-0.71em":n?"-0.71em":"0.71em").attr("transform","rotate("+s+")").attr("visibility",null)});break}default:e.selectAll(".tick > text").style("text-anchor",o?"middle":a?"end":"start").attr("dy",o?(n?.71:0)+"em":"0.32em").attr("dx",0).attr("visibility",null).attr("transform","rotate(0)")}},o.prototype.calcTickOverlapModulus=function(t){var e=1;switch(this.overlapMode()){case"rotate":case"stagger":case"hide":var i=[];t.selectAll(".tick > text").each(function(t){for(var o=this.getBoundingClientRect(),a=i.length-1;a>=0&&!(i[a].right<o.left);--a)i.length+1-a>e&&(e=i.length+1-a);i.push(o)})}return e},o.prototype.calcOverflow=function(t,e){this.updateScale();var i=this.isHorizontal();this.range(i?[0,this.width()]:[this.height(),0]);var o=t.append("g").attr("class",this.classID()).append("g");o.attr("class",i?"x":"y").call(this.d3Axis),e&&t.selectAll(".tick > text").remove();var a={left:0,top:0,right:0,bottom:0,tickOverlapModulus:this.calcTickOverlapModulus(o)};this.adjustText(o,a.tickOverlapModulus);var n=o.node().getBBox();switch(a.depth=i?n.height:n.width,this.shrinkToFit()){case"low":case"both":a.left=i?-n.x:0,a.bottom=i?0:-(this.height()-(n.height+n.y))}switch(this.shrinkToFit()){case"high":case"both":a.top=i?0:-n.y,a.right=i?-(this.width()-n.x-n.width):0}return o.remove(),a},o.prototype.wrap=function(e,i,o){o=o||/\s+/;var a=this;e.each(function(){for(var e,n=t.select(this),r=n.text().split(o).reverse(),s=[],l=0,p=1.1,h=n.attr("x"),c=n.attr("y"),u=parseFloat(n.style("font-size"))||10,d=Math.floor(i/(u*p))-1,y=a.isHorizontal()?1:Math.ceil(r.length/d),m=parseFloat(n.attr("dy")),f=n.text(null).append("tspan").attr("x",h).attr("y",c).attr("dy",m+"em"),g=0;e=r.pop();)s.push(e),f.text(s.join(" ")),g++,f.node().getComputedTextLength()>i&&g>=y&&(s.pop(),f.text(s.join(" ")),s=[e],f=n.append("tspan").attr("x",h).attr("y",c).attr("dy",++l*p+m+"em").text(e),g=0);a.isHorizontal()||n.selectAll("tspan").attr("y",-l/2+"em")})},o.prototype.linebreak=function(t,e){this.wrap(t,e,"\n")},o.prototype.update=function(t,i){function o(t){t.attr("transform",function(t){switch(n.orientation()){case"left":return"translate("+a.depth+", "+a.top+")";case"top":return"translate(0,"+a.depth+")";case"right":return"translate("+(n.width()-a.depth)+", "+a.top+")";case"bottom":return"translate(0,"+(n.height()-a.depth)+")"}return"translate(0,0)"})}e.prototype.update.apply(this,arguments);var a=this.calcOverflow(i);this.range(this.isHorizontal()?[a.left,this.width()-a.right]:[this.height()-a.top-a.bottom,0]);var n=this;this.svg.style("visibility","none"===this.type()?"hidden":null).transition().call(o),this._guideElement&&this.svg2.transition().call(o),this.svgAxis.call(this.d3Axis),this.adjustText(this.svgAxis,a.tickOverlapModulus);var r=this.svgAxis.select("path.domain"),s=r.node().getBBox();switch(this.orientation()){case"left":this.svgText.transition().attr("transform","rotate(-90)").attr("x",-2).attr("y",2).attr("dx",null).attr("dy",".71em").style("text-anchor","end").text(this.title());break;case"right":this.svgText.transition().attr("transform","rotate(-90)").attr("x",-2).attr("y",4).attr("dx",null).attr("dy","-.71em").style("text-anchor","end").text(this.title());break;case"top":this.svgText.transition().attr("transform","rotate(0)").attr("x",s.x+s.width-2).attr("y",2).attr("dx",null).attr("dy",".71em").style("text-anchor","end").text(this.title());break;case"bottom":this.svgText.transition().attr("transform","rotate(0)").attr("x",s.x+s.width-2).attr("y",-2).attr("dx",null).attr("dy",null).style("text-anchor","end").text(this.title())}this.svgGuides.call(this.d3Guides)},o.prototype.postUpdate=function(t,i){e.prototype.postUpdate.apply(this,arguments),this._guideElement&&this._guideElement.attr("transform",this._element.attr("transform"))},o}),function(t,e){"function"==typeof define&&define.amd?define("chart/XYAxis.js",["d3","../common/SVGWidget","./Axis","../common/Utility","css!./XYAxis"],e):t.chart_XYAxis=e(t.d3,t.common_SVGWidget,t.chart_Axis,t.common_Utility)}(this,function(t,e,i,o){function a(){e.call(this),o.SimpleSelectionMixin.call(this),this._drawStartPos="origin",this.domainAxis=(new i).classed({domain:!0}).orientation_default("bottom").type_default("ordinal").overlapMode_default("stagger").shrinkToFit_default("high").extend_default(0),this.valueAxis=(new i).classed({value:!0}).orientation_default("left").type_default("linear").shrinkToFit_default("high");var a=this;this.xBrush=t.svg.brush().on("brush",function(){return a.brushMoved()}),this.yBrush=t.svg.brush().on("brush",function(){return a.brushMoved()})}return a.prototype=Object.create(e.prototype),a.prototype.constructor=a,a.prototype._class+=" chart_XYAxis",a.prototype.mixin(o.SimpleSelectionMixin),a.prototype.publish("orientation","horizontal","set","Selects orientation for the axis",["horizontal","vertical"]),a.prototype.publish("selectionMode",!1,"boolean","Range Selector"),a.prototype.publishProxy("xAxisTickCount","domainAxis","tickCount"),a.prototype.publishProxy("xAxisTickFormat","domainAxis","tickFormat"),a.prototype.publishProxy("xAxisType","domainAxis","type"),a.prototype.publishProxy("xAxisTypeTimePattern","domainAxis","timePattern"),a.prototype.publish("xAxisDomainLow",null,"string","X-Axis Low",null,{optional:!0,disable:function(t){return"ordinal"===t.xAxisType()}}),a.prototype.publish("xAxisDomainHigh",null,"string","X-Axis High",null,{optional:!0,disable:function(t){return"ordinal"===t.xAxisType()}}),a.prototype.publishProxy("xAxisOverlapMode","domainAxis","overlapMode"),a.prototype.publishProxy("xAxisLabelRotation","domainAxis","labelRotation"),a.prototype.publishProxy("xAxisDomainPadding","domainAxis","extend"),a.prototype.publish("xAxisGuideLines",!1,"boolean","Y-Axis Guide Lines"),a.prototype.publish("xAxisFocus",!1,"boolean","X-Axis Focus",null,{disable:function(t){return"horizontal"!==t.orientation()}}),a.prototype.publish("xAxisFocusHeight",80,"number","X-Axis Focus Height",null,{disable:function(t){return!t.xAxisFocus()}}),a.prototype.publishProxy("yAxisTitle","valueAxis","title"),a.prototype.publishProxy("yAxisTickCount","valueAxis","tickCount"),a.prototype.publishProxy("yAxisTickFormat","valueAxis","tickFormat"),a.prototype.publishProxy("yAxisType","valueAxis","type"),a.prototype.publishProxy("yAxisTypeTimePattern","valueAxis","timePattern"),a.prototype.publishProxy("yAxisTypePowExponent","valueAxis","powExponent"),a.prototype.publishProxy("yAxisTypeLogBase","valueAxis","logBase"),a.prototype.publish("yAxisStacked",!1,"boolean","Stacked Chart",null,{tags:["Basic"],disable:function(t){return"ordinal"!==t.xAxisType()||t._class.indexOf("chart_Column")<0}}),a.prototype.publish("yAxisDomainLow",null,"string","Y-Axis Low",null,{optional:!0,disable:function(t){return"ordinal"===t.yAxisType()}}),a.prototype.publish("yAxisDomainHigh",null,"string","Y-Axis High",null,{optional:!0,disable:function(t){return"ordinal"===t.yAxisType()}}),a.prototype.publishProxy("yAxisDomainPadding","valueAxis","extend"),a.prototype.publish("yAxisGuideLines",!0,"boolean","Y-Axis Guide Lines"),a.prototype.publish("regions",[],"array","Regions"),a.prototype.publish("sampleData","","set","Display Sample Data",["","ordinal","ordinalRange","linear","time-x","time-y"]),a.prototype.resetSelection=function(){return this._prevBrush=null,this},a.prototype.columns=function(t){return e.prototype.columns.apply(this,arguments)},a.prototype.parseData=function(t){return this.domainAxis.parse(t)},a.prototype.parseValue=function(t){return this.valueAxis.parse(t,!0)},a.prototype.formatData=function(t){return this.domainAxis.format(t)},a.prototype.formatValue=function(t){return this.valueAxis.format(t,!0)},a.prototype.parsedData=function(){var t=this.data().map(function(t){var e=0;return t.map(function(t,i){if(0===i)return this.parseData(t);if(i>=this.columns().length)return t;var o=this.yAxisStacked()?[e,e+this.parseValue(t)]:this.parseValue(t);return e+=this.parseValue(t),o},this)},this);return t},a.prototype.enter=function(t,i){e.prototype.enter.apply(this,arguments),this.svg=i.append("g"),this.svgRegions=i.append("g"),this.svgDomainGuide=this.svg.append("g"),this.svgValueGuide=this.svg.append("g"),this.svgData=this.svg.append("g"),this.svgDataClipRect=this.svg.append("clipPath").attr("id",this.id()+"_clippath").append("rect").attr("x",0).attr("y",0),this.svgData=this.svg.append("g").attr("clip-path","url(#"+this.id()+"_clippath)"),this._selection.widgetElement(this.svgData),this.svgFocus=i.append("g"),this.domainAxis.target(this.svg.node()).guideTarget(this.svgDomainGuide.node()),this.valueAxis.target(this.svg.node()).guideTarget(this.svgValueGuide.node()),this.svgBrush=i.append("g").attr("class","brush")},a.prototype.resizeBrushHandle=function(t,e,i){var o,a,n;return"e"===t||"w"===t?(o=+("e"===t),a=o?1:-1,n=i/3,"M"+.5*a+","+n+"A6,6 0 0 "+o+" "+6.5*a+","+(n+6)+"V"+(2*n-6)+"A6,6 0 0 "+o+" "+.5*a+","+2*n+"ZM"+2.5*a+","+(n+8)+"V"+(2*n-8)+"M"+4.5*a+","+(n+8)+"V"+(2*n-8)):(o=+("s"===t),n=o?1:-1,a=e/3,"M"+a+", "+.5*n+"A6,6 0 0 "+(o+1)%2+" "+(a+6)+","+6.5*n+"H"+(2*a-6)+"A6,6 0 0 "+(o+1)%2+" "+2*a+","+.5*n+"ZM"+(a+8)+","+2.5*n+"H"+(2*a-8)+"M"+(a+8)+","+4.5*n+"H"+(2*a-8))},a.prototype.brushMoved=e.prototype.debounce(function(){var t=this.parsedData().filter(function(t){var e=t[0];return"ordinal"===this.xAxisType()&&(e=this.domainAxis.d3Scale(e)+(this.domainAxis.d3Scale.rangeBand?this.domainAxis.d3Scale.rangeBand()/2:0)),"horizontal"===this.orientation()?e>=this.xBrush.extent()[0]&&e<=this.xBrush.extent()[1]:e>=this.yBrush.extent()[0]&&e<=this.yBrush.extent()[1]},this);this.selection(t)},250),a.prototype.dataPos=function(t){return this.domainAxis.scalePos(t)},a.prototype.valuePos=function(t){return this.valueAxis.scalePos(t)},a.prototype.setScaleRange=function(t,e){this.xAxis.width(t),this.yAxis.height(e)},a.prototype.calcMargin=function(t,e,i){for(var o={top:!i&&this.selectionMode()?10:2,right:i&&(this.selectionMode()||this.xAxisFocus())?10:2,bottom:(this.xAxisFocus()?this.xAxisFocusHeight():0)+2,left:2},a=this.width()-o.left-o.right,n=this.height()-o.top-o.bottom,r=30,s=30,l=0;10>l;++l){this.xAxis.width(a-s).height(0);var p=this.xAxis.calcOverflow(e);this.yAxis.width(0).height(n-r);var h=this.yAxis.calcOverflow(e),c=p.depth,u=h.depth;if(c===r&&u===s){r=c,s=u;break}r=c,s=u}return this.xAxis.x(a/2+s/2+o.left).y(n+o.top).width(a-s),this.yAxis.x(o.left).y(n/2-r/2+o.top).height(n-r),o.left+=s,o.bottom+=r,o},a.prototype.updateRegions=function(e,i,o){var a=this,n=this.svgRegions.selectAll(".region").data(this.regions());n.enter().append("rect").attr("class","region"),o?n.attr("x",function(t){return a.dataPos(t.x0)}).attr("y",0).attr("width",function(t){return a.dataPos(t.x1)-a.dataPos(t.x0)}).attr("height",this.height()).style("stroke",function(t){return a._palette(t.colorID)}).style("fill",function(e){return t.hsl(a._palette(e.colorID)).brighter()}):n.attr("x",0).attr("y",function(t){return a.dataPos(t.x0)}).attr("width",this.width()).attr("height",function(t){return a.dataPos(t.x0)-a.dataPos(t.x1)}).style("stroke",function(t){return a._palette(t.colorID)}).style("fill",function(e){return t.hsl(a._palette(e.colorID)).brighter()}),n.exit().remove()},a.prototype.update=function(e,i){var o=this,a="horizontal"===this.orientation();this.updateRegions(e,i,a),this.domainAxis.orientation(a?"bottom":"left").title(this.columns()[0]),this.valueAxis.orientation(a?"left":"bottom"),this.xAxis=a?this.domainAxis:this.valueAxis,this.yAxis=a?this.valueAxis:this.domainAxis;var n=a?this.xBrush:this.yBrush,r=a?this.yBrush:this.xBrush,s=n.extent(),l=r.extent();switch(this.xAxisType()){case"ordinal":this.domainAxis.ordinals(this.data().map(function(t){return t[0]}));break;default:var p=this.xAxisDomainLow()?this.xAxisDomainLow():this.domainAxis.parseInvert(t.min(this.parsedData(),function(t){return t[0]})),h=this.xAxisDomainHigh()?this.xAxisDomainHigh():this.domainAxis.parseInvert(t.max(this.parsedData(),function(t){return t[0]}));void 0!==p&&void 0!==h&&this.domainAxis.low(p).high(h)}var c=this.yAxisDomainLow()?this.yAxisDomainLow():this.valueAxis.parseInvert(t.min(this.parsedData(),function(e){return t.min(e.filter(function(t,e){return e>0&&o.columns()[e]&&0!==o.columns()[e].indexOf("__")&&null!==t}),function(t){return t instanceof Array?t[0]:t})})),u=this.yAxisDomainHigh()?this.yAxisDomainHigh():this.valueAxis.parseInvert(t.max(this.parsedData(),function(e){return t.max(e.filter(function(t,e){return e>0&&o.columns()[e]&&0!==o.columns()[e].indexOf("__")&&null!==t}),function(t){return t instanceof Array?t[1]:t})}));this.valueAxis.low(c).high(u),this.margin=this.calcMargin(e,i,a);var d=this.width()-this.margin.left-this.margin.right;0>d&&(d=0);var y=this.height()-this.margin.top-this.margin.bottom;0>y&&(y=0);var m=a?d:y,f=a?y:d;if(this.domainAxis.tickLength(this.xAxisGuideLines()?f:0).render(),this.valueAxis.tickLength(this.yAxisGuideLines()?m:0).render(),this.svgDataClipRect.attr("width",d).attr("height",y),this.svgData.transition().attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.xBrush.x(this.domainAxis.d3Scale),this.yBrush.y(this.domainAxis.d3Scale),this.selectionMode()){if(this._prevXAxisType!==this.xAxisType()&&(this._prevXAxisType=this.xAxisType(),this._prevBrush=null),this._prevBrush)if(this._prevBrush&&this._prevBrush.orientation!==this.orientation())switch(this.xAxisType()){case"ordinal":n.extent([m-l[0]*m/this._prevBrush.maxCurrExtent,m-l[1]*m/this._prevBrush.maxCurrExtent]);break;default:n.extent(l)}else switch(this.xAxisType()){case"ordinal":if(this._prevBrush){var g=m/this._prevBrush.maxCurrExtent;n.extent([s[0]*g,s[1]*g])}break;default:var x=this.domainAxis.d3Scale.domain();(s[0]<x[0]||s[0]>x[1])&&(s[0]=x[0]),(s[1]<x[0]||s[1]>x[1])&&(s[1]=x[1]),n.extent(s)}else switch(this.xAxisType()){case"ordinal":n.extent([0,m]);break;default:n.extent(this.domainAxis.d3Scale.domain())}this._prevBrush={orientation:this.orientation(),maxCurrExtent:m}}this.svgBrush.attr("transform","translate("+this.margin.left+", "+this.margin.top+")").style("display",this.selectionMode()?null:"none").call(n).selectAll(".background").transition().attr("width",d).attr("height",y),this.svgBrush.selectAll(".extent, .resize rect").transition().attr(a?"y":"x",0).attr(a?"height":"width",f);var _=this.svgBrush.selectAll(".resize").selectAll("path").data(function(t){return t});_.enter().append("path"),_.transition().attr("d",function(t){return o.resizeBrushHandle(t,d,y)}),this.updateFocusChart(e,i,this.margin,d,y,a),this.updateChart(e,i,this.margin,d,y,a,250)},a.prototype.updateFocusChart=function(t,e,i,o,a,n){function r(){if("ordinal"!==s.focusChart.xAxisType())s.xAxis.domain(s.focusChart.xBrush.extent());else{var t=s.focusChart.xBrush.extent(),e=t[1]-t[0],i=e/o;s.xAxis.range([-t[0]/i,(o-t[0])/i])}s.xAxis.svgAxis.call(s.xAxis.d3Axis),s.xAxis.svgGuides.call(s.xAxis.d3Guides)}var s=this,l=this.svgFocus.selectAll("#"+this.id()+"_focusChart").data(this.xAxisFocus()?[!0]:[]);l.enter().append("g").attr("id",this.id()+"_focusChart").attr("class","focus").each(function(l){s.focusChart=(new s.constructor).target(this),s.focusChart.xBrush.on("brush.focus",function(){r(),s.updateChart(t,e,i,o,a,n,0)})}),l.each(function(t){s.copyPropsTo(s.focusChart),s.focusChart.xAxisFocus(!1).selectionMode(!0).tooltipStyle("none").orientation("horizontal").xAxisGuideLines(!1).xAxisDomainLow(null).xAxisDomainHigh(null).yAxisGuideLines(!1).x(s.width()/2).y(s.height()-s.xAxisFocusHeight()/2).width(s.width()).height(s.xAxisFocusHeight()).columns(s.columns()).data(s.data()).render(),r()}),l.exit().each(function(t){s.focusChart&&(s.focusChart.target(null),delete s.focusChart)}).remove()},a.prototype.updateChart=function(t,e,i,o,a,n,r){},a.prototype.exit=function(t,i){e.prototype.exit.apply(this,arguments)},a.prototype.selection=function(t){},a}),function(t,e){"function"==typeof define&&define.amd?define("chart/Scatter.js",["d3","../common/SVGWidget","./XYAxis","../api/INDChart","../api/ITooltip","css!./Scatter"],e):t.chart_Scatter=e(t.d3,t.common_SVGWidget,t.chart_XYAxis,t.api_INDChart,t.api_ITooltip)}(this,function(t,e,i,o,a){function n(t){i.call(this),o.call(this),a.call(this),this.xAxisGuideLines_default(!0).yAxisGuideLines_default(!0)}return n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype._class+=" chart_Scatter",n.prototype["implements"](o.prototype),n.prototype["implements"](a.prototype),n.prototype.publish("paletteID","default","set","Palette ID",n.prototype._palette["switch"](),{tags:["Basic","Shared"]}),n.prototype.publish("pointShape","cross","set","Shape of the data points",["circle","rectangle","cross"]),n.prototype.publish("pointSize",6,"number","Point Size",null,{range:{min:1,step:1,max:200}}),n.prototype.publish("interpolate","","set","Interpolate Data",["","linear","step","step-before","step-after","basis","bundle","cardinal","monotone"]),n.prototype.publish("interpolateFill",!1,"boolean","Fill Interpolation"),n.prototype.publish("interpolateFillOpacity",.66,"number","Fill Interpolation Opacity",null,{range:{min:0,step:.01,max:1}}),n.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),n.prototype.xPos=function(t){return"horizontal"===this.orientation()?this.dataPos(t.label):this.valuePos(t.value)},n.prototype.yPos=function(t){return"horizontal"===this.orientation()?this.valuePos(t.value):this.dataPos(t.label)},n.prototype.enter=function(t,e){i.prototype.enter.apply(this,arguments);var o=this;this.tooltipHTML(function(t){switch(o.tooltipStyle()){case"series-table":return o.tooltipFormat({label:t.label,arr:o.columns().slice(1).map(function(e,i){return{label:e,color:o._palette(e),value:o.data()[t.rowIdx][i+1]}})});default:return o.tooltipFormat({label:t.label,series:o.columns()[t.colIdx],value:t.value})}})},n.prototype.updateChart=function(e,i,o,a,n,r){function s(t){switch(t){case"rectangle":return"rect";case"circle":return"circle";case"cross":return"path"}}var l=this;this._palette=this._palette["switch"](this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id())),this._prevPointShape!==this.pointShape()&&(this.svgData.selectAll(".data").remove(),this._prevPointShape=this.pointShape());var p=this.flattenData().map(function(t){return t.shape=s(l.pointShape()),t}),h=this.svgData.selectAll(".point").data(p,function(t,e){return t.shape+"_"+e});h.enter().append("g").attr("class","point").each(function(e){var i=t.select(this);i.append("circle").attr("class","pointSelection").on("mouseout.tooltip",l.tooltip.hide).on("mousemove.tooltip",l.tooltip.show).call(l._selection.enter.bind(l._selection)).on("click",function(t,e){l.click(l.rowToObj(l.data()[t.rowIdx]),l.columns()[t.colIdx],l._selection.selected(this))}).on("dblclick",function(t,e){l.dblclick(l.rowToObj(l.data()[t.rowIdx]),l.columns()[t.colIdx],l._selection.selected(this))}),i.append(e.shape).attr("class","pointShape")}),h.each(function(e){var i=t.select(this).select(".pointSelection");i.attr("cx",function(t){return l.xPos(t)}).attr("cy",function(t){return l.yPos(t)}).attr("r",l.pointSize());var o=t.select(this).select(".pointShape");switch(e.shape){case"rect":o.attr("x",function(t){return l.xPos(t)-l.pointSize()/2}).attr("y",function(t){return l.yPos(t)-l.pointSize()/2}).attr("width",l.pointSize()).attr("height",l.pointSize()).style("fill",function(t,e){return l._palette(l.columns()[t.colIdx])});break;case"circle":o.attr("cx",function(t){return l.xPos(t)}).attr("cy",function(t){return l.yPos(t)}).attr("r",l.pointSize()/2).style("fill",function(t,e){return l._palette(l.columns()[t.colIdx])});break;case"path":o.attr("d",function(t){return"M"+(l.xPos(t)-l.pointSize()/2)+" "+(l.yPos(t)-l.pointSize()/2)+" L"+(l.xPos(t)+l.pointSize()/2)+" "+(l.yPos(t)+l.pointSize()/2)+" M"+(l.xPos(t)-l.pointSize()/2)+" "+(l.yPos(t)+l.pointSize()/2)+" L"+(l.xPos(t)+l.pointSize()/2)+" "+(l.yPos(t)-l.pointSize()/2)}).style("stroke",function(t,e){return l._palette(l.columns()[t.colIdx])})}}),h.exit().remove();var c=this.svgData.selectAll(".area").data(this.columns().filter(function(t,e){return l.interpolate()&&l.interpolateFill()&&e>0}));c.enter().append("path").attr("class","area");var u=t.svg.area().interpolate(this.interpolate());r?u.x(function(t){return l.xPos(t)}).y0(function(t){return n}).y1(function(t){return l.yPos(t)}):u.y(function(t){return l.yPos(t)}).x0(function(t){return 0}).x1(function(t){return l.xPos(t)}),c.each(function(e,i){var o=t.select(this);o.attr("d",u(p.filter(function(t){return t.colIdx===i+1}))).style("opacity",l.interpolateFillOpacity()).style("stroke","none").style("fill",function(e,o){return t.hsl(l._palette(l.columns()[i+1])).brighter()})}),c.exit().remove();var d=this.svgData.selectAll(".line").data(this.columns().filter(function(t,e){return l.interpolate()&&e>0}));d.enter().append("path").attr("class","line");var y=t.svg.line().x(function(t){return l.xPos(t)}).y(function(t){return l.yPos(t)}).interpolate(this.interpolate());d.each(function(e,i){var o=t.select(this),a=p.filter(function(t){return t.colIdx===i+1});o.attr("d",y(a)).style("stroke",function(t,e){return l._palette(l.columns()[i+1])}).style("fill","none")}),d.exit().remove()},n.prototype.exit=function(t,i){e.prototype.exit.apply(this,arguments)},n}),function(t,e){"function"==typeof define&&define.amd?define("chart/Area.js",["d3","./Scatter"],e):t.chart_Area=e(t.d3,t.chart_Scatter)}(this,function(t,e){function i(t){e.call(this),this.interpolate_default("linear").interpolateFill_default(!0)}return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype._class+=" chart_Area",i}),function(t,e){"function"==typeof define&&define.amd?define("chart/Column.js",["d3","./XYAxis","../api/INDChart","../api/ITooltip","css!./Column"],e):t.chart_Column=e(t.d3,t.chart_XYAxis,t.api_INDChart,t.api_ITooltip)}(this,function(t,e,i,o){function a(t){e.call(this),i.call(this),o.call(this),this._linearGap=25}return a.prototype=Object.create(e.prototype),a.prototype.constructor=a,a.prototype._class+=" chart_Column",a.prototype["implements"](i.prototype),a.prototype["implements"](o.prototype),a.prototype.publish("paletteID","default","set","Palette ID",a.prototype._palette["switch"](),{tags:["Basic","Shared"]}),a.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),a.prototype.enter=function(t,i){e.prototype.enter.apply(this,arguments);var o=this;this.tooltipHTML(function(t){switch(o.tooltipStyle()){case"series-table":return o.tooltipFormat({label:t.row[0],arr:o.columns().slice(1).map(function(e,i){return{label:e,color:o._palette(e),value:t.row[i+1]}})});default:var e=t.row[t.idx];return e instanceof Array&&(e=e[1]-e[0]),o.tooltipFormat({label:t.row[0],series:o.columns()[t.idx],value:e})}})},e.prototype.adjustedData=function(){var t=this.data().map(function(t){var e=0;return t.map(function(t,i){if(0===i)return t;if(i>=this.columns().length)return t;var o=this.yAxisStacked()?[e,e+t]:t;return e+=t,o},this)},this);return t},a.prototype.updateChart=function(e,i,o,a,n,r,s){var l=this;this._palette=this._palette["switch"](this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id()));var p=10,h=0;switch(this.xAxisType()){case"ordinal":p=this.domainAxis.d3Scale.rangeBand(),h=-p/2;break;case"linear":case"time":p=Math.max(Math.abs(this.dataPos(2)-this.dataPos(1))*(100-this._linearGap)/100,p),h=-p/2}var c=t.scale.ordinal().domain(l.columns().filter(function(t,e){return e>0})).rangeRoundBands(r?[0,p]:[p,0]),u=this.svgData.selectAll(".dataRow").data(this.adjustedData());u.enter().append("g").attr("class","dataRow"),this.tooltip.direction(r?"n":"e"),u.each(function(e,i){var o=t.select(this),a=o.selectAll("rect").data(e.filter(function(t,e){return e<l.columns().length}).map(function(t,i){return{column:l.columns()[i],row:e,value:t,idx:i}}).filter(function(t,e){return null!==t.value&&t.idx>0}));a.enter().append("rect").attr("class","columnRect").call(l._selection.enter.bind(l._selection)).on("mouseout.tooltip",l.tooltip.hide).on("mousemove.tooltip",l.tooltip.show).on("click",function(t,e){l.click(l.rowToObj(t.row),t.column,l._selection.selected(this))}).on("dblclick",function(t,e){l.dblclick(l.rowToObj(t.row),t.column,l._selection.selected(this))}),r?a.transition().duration(s).attr("x",function(t){
return l.dataPos(e[0])+(l.yAxisStacked()?0:c(t.column))+h}).attr("width",l.yAxisStacked()?p:c.rangeBand()).attr("y",function(t){return t.value instanceof Array?l.valuePos(t.value[1]):l.valuePos(t.value)}).attr("height",function(t){return t.value instanceof Array?l.valuePos(t.value[0])-l.valuePos(t.value[1]):n-l.valuePos(t.value)}).style("fill",function(t){return l._palette(t.column)}):a.transition().duration(s).attr("y",function(t){return l.dataPos(e[0])+(l.yAxisStacked()?0:c(t.column))+h}).attr("height",l.yAxisStacked()?p:c.rangeBand()).attr("x",function(t){return t.value instanceof Array?l.valuePos(t.value[0]):0}).attr("width",function(t){return t.value instanceof Array?l.valuePos(t.value[1])-l.valuePos(t.value[0]):l.valuePos(t.value)}).style("fill",function(t){return l._palette(t.column)}),a.exit().transition().duration(s).remove()}),u.exit().transition().duration(s).remove()},a}),function(t,e){"function"==typeof define&&define.amd?define("chart/Bar",["./Column"],e):t.chart_Bar=e(t.chart_Column)}(this,function(t){function e(e){t.call(this),this.orientation_default("vertical")}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype._class+=" chart_Bar",e}),function(t,e){"function"==typeof define&&define.amd?define("chart/Bubble.js",["d3","../common/SVGWidget","../api/I2DChart","../common/Text","../common/FAChar","../common/Utility","../api/ITooltip","css!./Bubble"],e):t.chart_Bubble=e(t.d3,t.common_SVGWidget,t.api_I2DChart,t.common_Text,t.common_FAChar,t.common_Utility,t.api_ITooltip)}(this,function(t,e,i,o,a,n,r){function s(o){e.call(this),i.call(this),r.call(this),n.SimpleSelectionMixin.call(this),this._drawStartPos="origin",this.labelWidgets={},this.d3Pack=t.layout.pack().sort(function(t,e){return e>t?-1:t>e?1:0}).size([this.width(),this.height()]).value(function(t){return t[1]})}return s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.prototype._class+=" chart_Bubble",s.prototype["implements"](i.prototype),s.prototype["implements"](r.prototype),s.prototype.mixin(n.SimpleSelectionMixin),s.prototype.publish("paletteID","default","set","Palette ID",s.prototype._palette["switch"](),{tags:["Basic","Shared"]}),s.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),s.prototype.size=function(t){var i=e.prototype.size.apply(this,arguments);return arguments.length&&this.d3Pack.size([this.width(),this.height()]),i},s.prototype.enter=function(t,i){e.prototype.enter.apply(this,arguments),this._selection.widgetElement(i);var o=this;this.tooltipHTML(function(t){switch(o.tooltipStyle()){case"series-table":return o.tooltipFormat({label:t[0],arr:o.columns().slice(1).map(function(e,i){return{label:e,color:o._palette(t[0]),value:t[1]}})});default:return o.tooltipFormat({label:t[0],value:t[1]})}})},s.prototype.update=function(e,i){var n=this;this._palette=this._palette["switch"](this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id()));var r=i.selectAll(".node").data(this.data().length?this.d3Pack.nodes({children:this.cloneData()}).filter(function(t){return!t.children}):[],function(t){return t[0]});r.enter().append("g").attr("class","node").attr("opacity",0).call(this._selection.enter.bind(this._selection)).on("click",function(t){n.click(n.rowToObj(t),n.columns()[1],n._selection.selected(this))}).on("dblclick",function(t){n.dblclick(n.rowToObj(t),n.columns()[1],n._selection.selected(this))}).each(function(e){var i=t.select(this);i.append("circle").attr("r",function(t){return t.r}).on("mouseout.tooltip",n.tooltip.hide).on("mousemove.tooltip",n.tooltip.show),e.__viz_faChar?n.labelWidgets[e[0]]=(new a)["char"](e.__viz_faChar).target(this).render():n.labelWidgets[e[0]]=(new o).text(e[0]).target(this).render()}),r.transition().attr("opacity",1).each(function(e){var i=t.select(this),o={x:e.x,y:e.y};if(i.select("circle").transition().attr("transform",function(t){return"translate("+o.x+","+o.y+")"}).style("fill",function(t){return n._palette(t[0])}).attr("r",function(t){return t.r}).select("title").text(function(t){return t[0]+" ("+t[1]+")"}),e.__viz_faChar)n.labelWidgets[e[0]].pos(o).render();else{var a=e[0],r=n.labelWidgets[e[0]].getBBox().width;if(2*e.r<16)a="";else if(2*e.r<r){var s=r-2*e.r,l=s/r,p=a.slice(0,Math.floor(a.length-a.length*l));a=p.slice(0,-3)+"..."}n.labelWidgets[e[0]].pos(o).text(a).render()}}),r.exit().transition().style("opacity",0).remove()},s.prototype.exit=function(t,i){e.prototype.exit.apply(this,arguments)},s}),function(t,e){"function"==typeof define&&define.amd?define("chart/Bullet.js",["d3","../common/HTMLWidget","../common/Utility","d3-bullet","css!./Bullet"],e):t.chart_Bullet=e(t.d3,t.common_HTMLWidget,t.common_Utility,t.d3.bullet)}(this,function(t,e,i,o){function a(t){e.call(this),i.SimpleSelectionMixin.call(this,!0)}return o=o||t.bullet||window.d3.bullet,a.prototype=Object.create(e.prototype),a.prototype.constructor=a,a.prototype._class+=" chart_Bullet",a.prototype.publish("titleColumn",null,"set","Title Column",function(){return this.columns()},{optional:!0}),a.prototype.publish("subtitleColumn",null,"set","Subtitle Column",function(){return this.columns()},{optional:!0}),a.prototype.publish("rangesColumn",null,"set","Ranges Column",function(){return this.columns()},{optional:!0}),a.prototype.publish("measuresColumn",null,"set","Measures Column",function(){return this.columns()},{optional:!0}),a.prototype.publish("markersColumn",null,"set","Markers Column",function(){return this.columns()},{optional:!0}),a.prototype.bulletData=function(){function t(t,i){var o=e.indexOf(i);return o>=0?t[o]instanceof Array?t[o]:[t[o]]:[]}var e=this.columns();return this.data().map(function(e){return{title:t(e,this.titleColumn()),subtitle:t(e,this.subtitleColumn()),ranges:t(e,this.rangesColumn()),measures:t(e,this.measuresColumn()),markers:t(e,this.markersColumn()),origRow:e}},this)},a.prototype.enter=function(i,o){e.prototype.enter.apply(this,arguments),t.select(i.parentNode).style("overflow","auto"),this._selection.widgetElement(o)},a.prototype.update=function(i,a){e.prototype.update.apply(this,arguments);var n=this,r={top:8,right:16,bottom:20,left:16},s=this.width()-r.left-r.right,l=50-r.top-r.bottom,p=a.selectAll("svg").data(this.bulletData());p.enter().append("svg").attr("class","bullet").call(this._selection.enter.bind(this._selection)).on("click",function(t){n.click(n.rowToObj(t.origRow),n.titleColumn(),n._selection.selected(this))}).on("dblclick",function(t){n.dblclick(n.rowToObj(t.origRow),n.titleColumn(),n._selection.selected(this))}).each(function(e){var i=t.select(this),o=i.append("g").attr("class","bulletBar"),a=o.append("g").attr("class","bulletTitle");a.append("text").attr("class","title"),a.append("text").attr("class","subtitle").attr("dy","1em")});var h=p.select(".bulletTitle").style("text-anchor","end").attr("transform","translate(-6,"+l/2+")");h.select(".title").text(function(t){return t.title}),h.select(".subtitle").text(function(t){return t.subtitle});var c=0;h.each(function(){var t=this.getBBox();t.width>c&&(c=t.width)});var u=(new o).width(s-c).height(l);p.attr("width",s).attr("height",l+r.top+r.bottom),p.select(".bulletBar").attr("transform","translate("+(c+r.left)+","+r.top+")").call(u),p.exit().remove()},a.prototype.exit=function(t,i){e.prototype.exit.apply(this,arguments)},a.prototype.click=function(t,e,i){console.log("Click:  "+JSON.stringify(t)+", "+e+","+i)},a.prototype.dblclick=function(t,e,i){console.log("Double click:  "+JSON.stringify(t)+", "+e+","+i)},a}),function(t,e){"function"==typeof define&&define.amd?define("chart/Gantt.js",["./Bar"],e):t.chart_Gantt=e(t.chart_Bar)}(this,function(t){function e(e){t.call(this),this.orientation_default("vertical").xAxisType_default("ordinal").yAxisType_default("time")}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype._class+=" chart_Gantt",e}),function(t,e){"function"==typeof define&&define.amd?define("chart/HexBin.js",["d3","../common/SVGWidget","./XYAxis","../api/INDChart","../api/ITooltip","../common/Palette","d3-hexbin","css!./HexBin"],e):t.chart_HexBin=e(t.d3,t.common_SVGWidget,t.chart_XYAxis,t.api_INDChart,t.api_ITooltip,t.common_Palette)}(this,function(t,e,i,o,a,n,r){function s(t){i.call(this),o.call(this),a.call(this),this._hexbin=new r,this.xAxisGuideLines_default(!1).yAxisGuideLines_default(!1)}return r=r||t.hexbin||window.d3.hexbin,s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.prototype._class+=" chart_HexBin",s.prototype["implements"](o.prototype),s.prototype["implements"](a.prototype),s.prototype._palette=n.rainbow("default"),s.prototype.publish("paletteID","Blues","set","Palette ID",s.prototype._palette["switch"](),{tags:["Basic","Shared"]}),s.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),s.prototype.publish("binSize",20,"number","Bin radius",null,{range:{min:1,max:300,step:1}}),s.prototype.xPos=function(t){return"horizontal"===this.orientation()?this.dataPos(t.label):this.valuePos(t.value)},s.prototype.yPos=function(t){return"horizontal"===this.orientation()?this.valuePos(t.value):this.dataPos(t.label)},s.prototype.updateChart=function(e,i,o,a,n,r,s){var l=this;this._palette=this._palette["switch"](this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id())),this._hexbin.size([a,n]).radius(this.binSize());var p=this.flattenData(),h=p.map(function(t,e){return[l.xPos(t),l.yPos(t)]}),c=this._hexbin(h),u=t.max(c,function(t){return t.length}),d=this.svgData.selectAll(".hexagon").data(c,function(t,e){return t.i+"_"+t.j});d.enter().append("path").attr("class","hexagon").attr("transform",function(t){return"translate("+t.x+","+t.y+")scale(0)"}),d.transition().duration(s).attr("d",this._hexbin.hexagon()).attr("transform",function(t){return"translate("+t.x+","+t.y+")scale(1)"}).style("fill",function(t){return l._palette(t.length,0,u)}),d.exit().transition().duration(s).attr("transform",function(t){return"translate("+t.x+","+t.y+")scale(0)"}).remove()},s.prototype.exit=function(t,i){e.prototype.exit.apply(this,arguments)},s}),function(t,e){"function"==typeof define&&define.amd?define("chart/Line.js",["d3","./Scatter","css!./Line"],e):t.chart_Line=e(t.d3,t.chart_Scatter)}(this,function(t,e){function i(t){e.call(this),this.interpolate_default("linear")}return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype._class+=" chart_Line",i}),function(t,e){"function"==typeof define&&define.amd?define("chart/MultiChart",["d3","../common/HTMLWidget","../common/Utility","../api/INDChart","../api/IGraph"],e):t.chart_MultiChart=e(t.d3,t.common_HTMLWidget,t.common_Utility,t.api_INDChart,t.api_IGraph)}(this,function(t,e,i,o,a){function n(){e.call(this),o.call(this),a.call(this),this._tag="div",this._allCharts={},this._allChartTypes.forEach(function(t){var e=JSON.parse(JSON.stringify(t));e.widget=null,this._allCharts[t.id]=e,this._allCharts[t.display]=e,this._allCharts[t.widgetClass]=e},this),this._chartTypeDefaults={},this._chartTypeProperties={}}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype._class+=" chart_MultiChart",n.prototype["implements"](o.prototype),n.prototype["implements"](a.prototype),n.prototype._GraphChartTypes=[{id:"GRAPH",display:"Graph",widgetClass:"graph_Graph"},{id:"GRAPHC",display:"GraphC",widgetClass:"graph_GraphC"}].map(function(t){return t.family="GRAPH",t}),n.prototype._1DChartTypes=[{id:"C3_GAUGE",display:"Gauge (C3)",widgetClass:"c3chart_Gauge"}].map(function(t){return t.family="1D",t}),n.prototype._2DChartTypes=[{id:"SUMMARY",display:"Summary",widgetClass:"chart_Summary"},{id:"BUBBLE",display:"Bubble",widgetClass:"chart_Bubble"},{id:"PIE",display:"Pie",widgetClass:"chart_Pie"},{id:"GOOGLE_PIE",display:"Pie (Google)",widgetClass:"google_Pie"},{id:"C3_DONUT",display:"Donut (C3)",widgetClass:"c3chart_Donut"},{id:"C3_PIE",display:"Pie (C3)",widgetClass:"c3chart_Pie"},{id:"AM_FUNNEL",display:"Area (amCharts)",widgetClass:"amchart_Funnel"},{id:"AM_PIE",display:"Pie (amCharts)",widgetClass:"amchart_Pie"},{id:"AM_PYRAMID",display:"Area (amCharts)",widgetClass:"amchart_Pyramid"},{id:"WORD_CLOUD",display:"Word Cloud",widgetClass:"other_WordCloud"}].map(function(t){return t.family="2D",t}),n.prototype._NDChartTypes=[{id:"COLUMN",display:"Column",widgetClass:"chart_Column"},{id:"BAR",display:"Bar",widgetClass:"chart_Bar"},{id:"LINE",display:"Line",widgetClass:"chart_Line"},{id:"AREA",display:"Area",widgetClass:"chart_Area"},{id:"STEP",display:"Step",widgetClass:"chart_Step"},{id:"SCATTER",display:"Scatter",widgetClass:"chart_Scatter"},{id:"HEXBIN",display:"Hex Bin",widgetClass:"chart_HexBin"},{id:"GOOGLE_BAR",display:"Bar (Google)",widgetClass:"google_Bar"},{id:"GOOGLE_COLUMN",display:"Column (Google)",widgetClass:"google_Column"},{id:"GOOGLE_LINE",display:"Line (Google)",widgetClass:"google_Line"},{id:"GOOGLE_SCATTER",display:"Scatter (Google)",widgetClass:"google_Scatter"},{id:"GOOGLE_COMBO",display:"Combo (Google)",widgetClass:"google_Combo"},{id:"C3_AREA",display:"Area (C3)",widgetClass:"c3chart_Area"},{id:"C3_BAR",display:"Bar (C3)",widgetClass:"c3chart_Bar"},{id:"C3_COLUMN",display:"Column (C3)",widgetClass:"c3chart_Column"},{id:"C3_LINE",display:"Line (C3)",widgetClass:"c3chart_Line"},{id:"C3_SCATTER",display:"Scatter (C3)",widgetClass:"c3chart_Scatter"},{id:"C3_STEP",display:"Step (C3)",widgetClass:"c3chart_Step"},{id:"C3_COMBO",display:"Combo (C3)",widgetClass:"c3chart_Combo"},{id:"AM_AREA",display:"Area (amCharts)",widgetClass:"amchart_Area"},{id:"AM_BAR",display:"Bar (amCharts)",widgetClass:"amchart_Bar"},{id:"AM_LINE",display:"Line (amCharts)",widgetClass:"amchart_Line"},{id:"AM_SCATTER",display:"Scatter (amCharts)",widgetClass:"amchart_Scatter"},{id:"AM_COLUMN",display:"Column (amCharts)",widgetClass:"amchart_Column"},{id:"AM_GANTT",display:"Gantt (amCharts)",widgetClass:"amchart_Gantt"},{id:"AM_COMBO",display:"Combo (amCharts)",widgetClass:"amchart_Combo"}].map(function(t){return t.family="ND",t}),n.prototype._mapChartTypes=[{id:"CHORO_USSTATES",display:"US State Choropleth",widgetClass:"map_ChoroplethStates"},{id:"CHORO_USCOUNTIES",display:"US County Choropleth",widgetClass:"map_ChoroplethCounties"},{id:"CHORO_COUNTRIES",display:"Country Choropleth",widgetClass:"map_ChoroplethCountries"},{id:"GOOGLE_MAP",display:"Google Map",widgetClass:"map_GMapLayered"},{id:"OPENSTREET",display:"Open Street Map",widgetClass:"map_OpenStreet"}].map(function(t){return t.family="map",t}),n.prototype._anyChartTypes=[{id:"TABLE",display:"Table",widgetClass:"other_Table"},{id:"TABLE_NESTED",display:"Nested Table",widgetClass:"other_NestedTable"},{id:"TABLE_CALENDAR",display:"Table driven Calendar Heat Map",widgetClass:"other_CalendarHeatMap"},{id:"TABLE_BULLET",display:"Table driven bullet chart",widgetClass:"chart_Bullet"},{id:"TABLE_SELECT",display:"Table driven select",widgetClass:"other_Select"},{id:"TABLE_AUTOCOMPLETE",display:"Table driven auto complete",widgetClass:"other_AutoCompleteText"},{id:"TABLE_HANDSON",display:"Table driven handson",widgetClass:"handson_Table"},{id:"TABLE_OPPORTUNITY",display:"Table driven opportunity widget",widgetClass:"graph_Opportunity"},{id:"TABLE_TREE",display:"Table driven tree",widgetClass:"tree_Dendrogram"},{id:"TABLE_TREEMAP",display:"Table driven Treemap",widgetClass:"tree_Treemap"},{id:"TABLE_SANKEY",display:"Table driven Sankey",widgetClass:"graph_Sankey"},{id:"TABLE_GMAP_PIN",display:"Table driven Google Map (pins)",widgetClass:"map_GMapPin"},{id:"TABLE_GMAP_PINLINE",display:"Table driven Google Map (pins/lines)",widgetClass:"map_GMapPinLine"},{id:"TABLE_XML_TREE",display:"Table driven XML Tree",widgetClass:"tree_Indented"},{id:"TABLE_ORB",display:"Pivot Table (orb.js)",widgetClass:"react_Orb"}].map(function(t){return t.family="any",t}),n.prototype._allChartTypes=n.prototype._GraphChartTypes.concat(n.prototype._1DChartTypes.concat(n.prototype._2DChartTypes.concat(n.prototype._NDChartTypes.concat(n.prototype._mapChartTypes.concat(n.prototype._anyChartTypes))))),n.prototype._allMap=t.map(n.prototype._allChartTypes,function(t){return t.family}),n.prototype._allFamilies=n.prototype._allMap.keys(),n.prototype._allChartTypesMap={},n.prototype._allChartTypesByClass={},n.prototype._allChartTypes.forEach(function(t){t.widgetPath=i.widgetPath(t.widgetClass),n.prototype._allChartTypesMap[t.id]=t,n.prototype._allChartTypesByClass[t.widgetClass]=t},this),n.prototype.publishReset(),n.prototype.publish("hideRowOnLegendClick",!1,"boolean","Enable/Disable hiding row on legend clicks",null,{tags:["Basic"]}),n.prototype.publish("chartType","BUBBLE","set","Chart Type",n.prototype._allChartTypes.map(function(t){return t.id}),{tags:["Basic"]}),n.prototype.publish("chart",null,"widget","Chart",null,{tags:["Basic"]}),n.prototype.fields=function(t){var i=e.prototype.fields.apply(this,arguments);if(this.chart()){if(!arguments.length)return this.chart().fields();this.chart().fields(t)}return i},n.prototype.columns=function(t,i){var o=e.prototype.columns.apply(this,arguments);if(this.chart()){if(!arguments.length)return this.chart().columns();this.chart().columns(t,i)}return o},n.prototype.data=function(t){var i=e.prototype.data.apply(this,arguments);if(this.chart()){if(!arguments.length)return this.chart().data();this.chart().data(t)}return i},n.prototype._origChart=n.prototype.chart,n.prototype.chart=function(t){var e=n.prototype._origChart.apply(this,arguments);if(arguments.length){var i=this;this._allChartTypesByClass[t.classID()]?this.chartType(this._allChartTypesByClass[t.classID()].id):console.log("Unknown Class ID:  "+t.classID()),t.click=function(t,e,o){i.click.apply(i,arguments)},t.dblclick=function(t,e,o){i.dblclick.apply(i,arguments)},t.vertex_click=function(t,e,o,a){i.vertex_click.apply(i,arguments)},t.vertex_dblclick=function(t,e,o,a){i.vertex_dblclick.apply(i,arguments)},t.edge_click=function(t,e,o,a){i.edge_click.apply(i,arguments)},t.edge_dblclick=function(t,e,o,a){i.edge_dblclick.apply(i,arguments)},this._chartMonitor&&(this._chartMonitor.remove(),delete this._chartMonitor),this._chartMonitor=t.monitor(function(e,o,a){i.broadcast(e,o,a,t)})}return e},n.prototype.hasOverlay=function(){return this.chart()&&this.chart().hasOverlay()},n.prototype.visible=function(t){return arguments.length?(this.chart()&&this.chart().visible(t),this):this.chart()&&this.chart().visible()},n.prototype.chartTypeDefaults=function(t){return arguments.length?(this._chartTypeDefaults=t,this):this._chartTypeDefaults},n.prototype.chartTypeProperties=function(t){return arguments.length?(this._chartTypeProperties=t,this):this._chartTypeProperties},n.prototype.getChartDataFamily=function(){return this._allCharts[this.chartType()].family},n.prototype.requireContent=function(t,e){i.requireWidget(this._allCharts[t].widgetClass).then(function(t){e(new t)})},n.prototype.switchChart=function(t){if(this._switchingTo===this.chartType())return void(t&&t(this));this._switchingTo&&console.log("Attempting switch to:  "+this.chartType()+", before previous switch is complete ("+this._switchingTo+")"),this._switchingTo=this.chartType();var e=this.chart(),i=this;this.requireContent(this.chartType(),function(o){if(o!==e){var a=i.size();o.fields(i.fields()).data(i.data()).size(a),i.chart(o),e&&e.data([]).size({width:1,height:1}).render()}delete i._switchingTo,t&&t(this)})},n.prototype.update=function(t,i){e.prototype.update.apply(this,arguments);var o=i.selectAll(".multiChart").data(this.chart()?[this.chart()]:[],function(t){return t._id});o.enter().append("div").attr("class","multiChart").each(function(t){t.target(this)});var a=this.chart();if(a){for(var n in this._chartTypeDefaults)if(a[n+"_default"])try{a[n+"_default"](this._chartTypeDefaults[n])}catch(r){console.log("Exception Setting Default:  "+n)}else console.log("Unknown Default:  "+n);this._chartTypeDefaults={};for(var s in this._chartTypeProperties)if(a[s])try{a[s](this._chartTypeProperties[s])}catch(r){console.log("Exception Setting Property:  "+s)}else console.log("Unknown Property:  "+s);this._chartTypeProperties={}}var l=this;o.each(function(t){t.resize(l.size())}),o.exit().transition().each(function(t){t.target(null)}).remove()},n.prototype.exit=function(t,i){this._chartMonitor&&(this._chartMonitor.remove(),delete this._chartMonitor),this.chart()&&this.chart().target(null),e.prototype.exit.apply(this,arguments)},n.prototype.render=function(t){if(this.chartType()&&(!this.chart()||this.chart().classID()!==this._allCharts[this.chartType()].widgetClass)){var i=this,o=arguments;return this.switchChart(function(){e.prototype.render.apply(i,o)}),this}return e.prototype.render.apply(this,arguments)},n}),function(t,e){"function"==typeof define&&define.amd?define("chart/MultiChartSurface.js",["d3","../common/ResizeSurface","./MultiChart","../api/INDChart"],e):t.chart_MultiChartSurface=e(t.d3,t.common_ResizeSurface,t.chart_MultiChart,t.api_INDChart)}(this,function(t,e,i,o){function a(){e.call(this),o.call(this),this._title="MultiChartSurface",this._content=new i;var t=this;this._content.click=function(e,i){t.click(e,i)},this._menu.click=function(e){t._content.chartType(e).render()},this.content(this._content),this.mode("all")}return a.prototype=Object.create(e.prototype),a.prototype.constructor=a,a.prototype._class+=" chart_MultiChartSurface",a.prototype["implements"](o.prototype),a.prototype.publish("mode","2D","set","Chart Type",["1D","2D","ND","all"]),a.prototype.publishProxy("chartType","_content"),a.prototype.columns=function(t){return arguments.length?(this.content().columns(t),this):this.content().columns()},a.prototype.data=function(t){return arguments.length?(this.content().data(t),this):this.content().data()},a.prototype._origMode=a.prototype.mode,a.prototype.mode=function(t){var e=a.prototype._origMode.apply(this,arguments);if(arguments.length)switch(this._mode=t,this._mode){case"1d":case"1D":this.menu(this.content()._1DChartTypes.map(function(t){return t.display}).sort());break;case"2d":case"2D":this.menu(this.content()._2DChartTypes.concat(this.content()._NDChartTypes.concat(this.content()._anyChartTypes)).map(function(t){return t.display}).sort());break;case"multi":case"ND":this.menu(this.content()._NDChartTypes.concat(this.content()._anyChartTypes).map(function(t){return t.display}).sort());break;case"all":default:this.menu(this.content()._allChartTypes.map(function(t){return t.display}).sort())}return e},a}),function(t,e){"function"==typeof define&&define.amd?define("chart/Pie.js",["d3","../common/SVGWidget","../api/I2DChart","../common/Text","../common/FAChar","../common/Utility","../api/ITooltip","css!./Pie"],e):t.chart_Pie=e(t.d3,t.common_SVGWidget,t.api_I2DChart,t.common_Text,t.common_FAChar,t.common_Utility,t.api_ITooltip)}(this,function(t,e,i,o,a,n,r){function s(o){e.call(this),i.call(this),r.call(this),n.SimpleSelectionMixin.call(this),this.labelWidgets={},this.d3Pie=t.layout.pie().padAngle(.0025).sort(function(t,e){return e>t?-1:t>e?1:0}).value(function(t){return t[1]}),this.d3Arc=t.svg.arc().padRadius(this.calcRadius()).innerRadius(this.innerRadius()),this.tooltipTick_default(!1).tooltipOffset_default(0)}return s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.prototype._class+=" chart_Pie",s.prototype["implements"](i.prototype),s.prototype["implements"](r.prototype),s.prototype.mixin(n.SimpleSelectionMixin),s.prototype.publish("paletteID","default","set","Palette ID",s.prototype._palette["switch"](),{tags:["Basic","Shared"]}),s.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),s.prototype.publish("outerText",!1,"boolean","Sets label position inside or outside chart",null,{tags:["Basic"]}),s.prototype.publish("innerRadius",0,"number","Sets inner pie hole radius as a percentage of the radius of the pie chart",null,{tags:["Basic"],range:{min:0,step:1,max:100}}),s.prototype.publish("showSeriesPercentage",!1,"boolean","If true, percentage will be shown in pie wedge",null,{tags:["Basic"]}),s.prototype.publish("seriesPercentageFormat",",.0f","string","Number format used for formatting series percentages",null,{disable:function(t){return!t.showSeriesPercentage()}}),s.prototype.pointInArc=function(t,e){var i=this.d3Arc.innerRadius()(e),o=this.d3Arc.outerRadius()(e),a=this.d3Arc.startAngle()(e),n=this.d3Arc.endAngle()(e),r=t.x*t.x+t.y*t.y,s=Math.atan2(t.x,-t.y);return s=0>s?s+2*Math.PI:s,r>=i*i&&o*o>=r&&s>=a&&n>=s},s.prototype.boxInArc=function(t,e,i){var o={x:t.x+e.x,y:t.y+e.y},a={x:o.x+e.width,y:o.y},n={x:o.x,y:o.y+e.height},r={x:o.x+e.width,y:o.y+e.height};return this.pointInArc(o,i)&&this.pointInArc(a,i)&&this.pointInArc(n,i)&&this.pointInArc(r,i)},s.prototype.calcRadius=function(t){return Math.min(this._size.width,this._size.height)/2-2},s.prototype.intersection=function(t,e){return this.intersectCircle(t,e)},s.prototype.enter=function(t,i){e.prototype.enter.apply(this,arguments),this._selection.widgetElement(i);var o=this;this.tooltipHTML(function(t){switch(o.tooltipStyle()){case"series-table":return o.tooltipFormat({label:t.data[0],arr:o.columns().slice(1).map(function(e,i){return{label:e,color:o._palette(t.data[0]),value:t.data[i+1]}})});default:return o.tooltipFormat({label:t.data[0],value:t.data[1]})}})},s.prototype.update=function(i,n){function r(e,i){return function(){t.select(this).transition().delay(i).attrTween("d",function(i){var o=t.interpolate(i.outerRadius,s.calcRadius()+e);return function(t){return i.outerRadius=o(t),s.d3Arc(i)}})}}e.prototype.update.apply(this,arguments);var s=this;this._palette=this._palette["switch"](this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id())),this.d3Arc.innerRadius(this.innerRadius_exists()?this.calcRadius()*this.innerRadius()/100:0);var l=n.selectAll(".arc").data(this.d3Pie(this.data()),function(t){return t.data[0]});if(l.enter().append("g").attr("class","arc").attr("opacity",0).call(this._selection.enter.bind(this._selection)).on("click",function(t){s.click(s.rowToObj(t.data),s.columns()[1],s._selection.selected(this))}).on("dblclick",function(t){s.dblclick(s.rowToObj(t.data),s.columns()[1],s._selection.selected(this))}).each(function(e){var i=t.select(this);i.append("path").on("mouseout.tooltip",s.tooltip.hide).on("mousemove.tooltip",s.tooltip.show).on("mouseover",r(0,0)).on("mouseout",r(-5,150)),e.data.__viz_faChar?s.labelWidgets[e.data[0]]=(new a)["char"](e.data.__viz_faChar).target(this).render():s.labelWidgets[e.data[0]]=(new o).text(e.data[0]).target(this).render()}),this.showSeriesPercentage()){var p=t.format(this.seriesPercentageFormat());this._dataSum=0,this.data().forEach(function(t){s._dataSum+=t[1]})}if(l.each(function(t){s.labelWidgets[t.data[0]].text(s.showSeriesPercentage()?p(t.data[1]/s._dataSum*100)+"%":t.data[0]).render()}),l.transition().attr("opacity",1).each(function(e){e.outerRadius=s.calcRadius()-5;var i={x:0,y:1};if(s.outerText()){var o=Math.cos((e.startAngle+e.endAngle-Math.PI)/2),a=Math.sin((e.startAngle+e.endAngle-Math.PI)/2),n=s.labelWidgets[e.data[0]].getBBox(),r=Math.abs(o)>Math.abs(a)?n.width:n.height;i.x=o*(s.calcRadius()+r),i.y=a*(s.calcRadius()+r)}else{var l=s.d3Arc.centroid(e);i={x:l[0],y:l[1]}}var p=t.select(this);p.select("path").transition().attr("d",s.d3Arc).style("fill",function(t){return s._palette(t.data[0])}),s.labelWidgets[e.data[0]].pos(i).render().element().classed("innerLabel",!s.outerText()).classed("outerLabel",s.outerText()).style("opacity",s.outerText()||s.boxInArc(i,s.labelWidgets[e.data[0]].getBBox(!0),e)?null:0)}),l.exit().transition().style("opacity",0).remove(),s.outerText()){var h=n.selectAll("line").data(this.d3Pie(this.data()),function(t){return t.data[0]});h.enter().append("line").attr("x1",0).attr("x2",0).attr("y1",-this.calcRadius()-3).attr("y2",-this.calcRadius()-8).attr("stroke","gray").attr("transform",function(t){return"rotate("+(t.startAngle+t.endAngle)/2*(180/Math.PI)+")"}),h.transition().attr("transform",function(t){return"rotate("+(t.startAngle+t.endAngle)/2*(180/Math.PI)+")"}),h.exit().remove()}},s.prototype.exit=function(t,i){e.prototype.exit.apply(this,arguments)},s}),function(t,e){"function"==typeof define&&define.amd?define("chart/Step.js",["d3","./Scatter"],e):t.chart_Step=e(t.d3,t.chart_Scatter)}(this,function(t,e){function i(t){e.call(this),this.interpolate_default("step")}return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype._class+=" chart_Step",i}),function(t,e){"function"==typeof define&&define.amd?define("chart/Summary.js",["d3","../common/HTMLWidget","../api/I2DChart","css!font-awesome","css!./Summary"],e):t.chart_Summary=e(t.d3,t.common_HTMLWidget,t.api_I2DChart)}(this,function(t,e,i){function o(){e.call(this),this._tag="div",this._drawStartPos="center",this.playInterval(this.playInterval()),this._playIntervalIdx=0}var a="text",n="html";o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.prototype["implements"](i.prototype),o.prototype._class+=" chart_Summary",o.prototype.publish("iconColumn",null,"set","Select Icon Column",function(){return this.columns()},{optional:!0}),o.prototype.publish("icon","fa-briefcase","string","FA Char icon class",null,{disable:function(t){return t.iconColumn()}}),o.prototype.publish("headerFontSize",null,"number","headerFontSize",null,{optional:!0}),o.prototype.publish("textFontSize",null,"number","textFontSize",null,{optional:!0}),o.prototype.publish("moreFontSize",null,"number","moreFontSize",null,{optional:!0}),o.prototype.publish("iconFontSize",null,"number","iconFontSize",null,{optional:!0}),o.prototype.publish("hideLabel",!1,"boolean","Hide label column"),o.prototype.publish("labelColumn",null,"set","Select display value",function(){return this.columns()},{optional:!0,disable:function(t){return t.hideLabel()}}),o.prototype.publish("labelHTML",!1,"boolean","Allow HTML",null,{disable:function(t){return t.hideLabel()}}),o.prototype.publish("valueColumn",null,"set","Select display value",function(){return this.columns()},{optional:!0}),o.prototype.publish("valueHTML",!1,"boolean","Allow HTML"),o.prototype.publish("hideMore",!1,"boolean","Hide More Information"),o.prototype.publish("moreIconColumn",null,"set","Select More Icon Column",function(){return this.columns()},{optional:!0,disable:function(t){return t.hideMore()}}),o.prototype.publish("moreIcon","fa-info-circle","string","FA Char icon class",null,{disable:function(t){return t.hideMore()||t.moreIconColumn()}}),o.prototype.publish("moreTextColumn",null,"set","Select display value",function(){return this.columns()},{optional:!0,disable:function(t){return t.hideMore()}}),o.prototype.publish("moreText","More Info","string","More text",null,{disable:function(t){return t.hideMore()||t.moreTextColumn()}}),o.prototype.publish("moreTextHTML",!1,"boolean","Allow HTML",null,{disable:function(t){return t.hideMore()}}),o.prototype.publish("colorFillColumn",null,"set","Column for color",function(){return this.columns()},{optional:!0}),o.prototype.publish("colorFill","#3498db","html-color","Fill Color",null,{disable:function(t){return t.colorFillColumn()}}),o.prototype.publish("colorStrokeColumn",null,"set","Column for color",function(){return this.columns()},{optional:!0}),o.prototype.publish("colorStroke","#ffffff","html-color","Fill Color",null,{disable:function(t){return t.colorStrokeColumn()}}),o.prototype.publish("fixedSize",!0,"boolean","Fix Size to Min Width/Height"),o.prototype.publish("minWidth",225,"number","Minimum Width"),o.prototype.publish("minHeight",150,"number","Minimum Height"),o.prototype.publish("playInterval",null,"number","Play Interval",null,{optional:!0});var r=o.prototype.playInterval;return o.prototype.playInterval=function(t){var e=r.apply(this,arguments);if(arguments.length){this._playIntervalHandle&&clearInterval(this._playIntervalHandle);
var i=this;t&&(this._playIntervalHandle=setInterval(function(){i._playIntervalIdx++,i._renderCount&&i.data().length&&i.render()},t))}return e},o.prototype.lookupFieldIdx=function(t,e){var i=e;if(!(this[t+"_exists"]()&&(i=this.columns().indexOf(this[t]()),0>i)))return i},o.prototype.lookupFieldText=function(t,e){return this[t+"_exists"]()?this[t]():void 0!==e?this.columns()[e]||"":""},o.prototype.currentRow=function(){return this.data()[this._playIntervalIdx]},o.prototype.summaryData=function(){var t;this.hideLabel()||(t=this.lookupFieldIdx("labelColumn",0));var e,i,o=this.lookupFieldIdx("iconColumn"),a=this.lookupFieldIdx("valueColumn",1);this.hideMore()||(e=this.lookupFieldIdx("moreIconColumn"),i=this.lookupFieldIdx("moreTextColumn"));var n=this.lookupFieldIdx("colorFillColumn"),r=this.lookupFieldIdx("colorStrokeColumn");return this.formattedData().map(function(s){return{icon:void 0===o?this.icon():s[o],label:void 0===t?"":s[t],value:s[a],moreIcon:void 0===e?this.hideMore()?"":this.moreIcon():s[e],moreText:void 0===i?this.hideMore()?"":this.moreText():s[i],fill:void 0===n?this.colorFill():s[n],stroke:void 0===r?this.colorStroke():s[r]}},this)},o.prototype.enter=function(t,i){e.prototype.enter.apply(this,arguments),this._mainDiv=i.append("div");var o=this;this._headerDiv=this._mainDiv.append("h2").on("click",function(t){o.click(o.rowToObj(o.currentRow()),o.lookupFieldText("valueColumn",1),!0)}).on("dblclick",function(t){o.dblclick(o.rowToObj(o.currentRow()),o.lookupFieldText("valueColumn",1),!0)}),this._textDiv=this._mainDiv.append("div").attr("class","text").on("click",function(t){o.click(o.rowToObj(o.currentRow()),o.lookupFieldText("labelColumn",0),!0)}).on("dblclick",function(t){o.dblclick(o.rowToObj(o.currentRow()),o.lookupFieldText("labelColumn",0),!0)})},o.prototype.update=function(i,o){e.prototype.update.apply(this,arguments),this.data().length;var r=this.summaryData();this._playIntervalIdx>=r.length&&(this._playIntervalIdx=0);var s=this._playIntervalIdx<r.length?r[this._playIntervalIdx]:["",""];o.style({width:this.fixedSize()?this.minWidth_exists()?this.minWidth()+"px":null:"100%",height:this.fixedSize()?this.minHeight_exists()?this.minHeight()+"px":null:"100%"}),this._mainDiv.attr("class","content bgIcon "+s.icon).transition().style({"background-color":s.fill,color:s.stroke,"min-width":this.minWidth_exists()?this.minWidth()+"px":null,"min-height":this.minHeight_exists()?this.minHeight()+"px":null,"font-size":this.iconFontSize_exists()?this.iconFontSize()+"px":null}),this._headerDiv.transition().style("color",s.stroke).style("font-size",this.headerFontSize_exists()?this.headerFontSize()+"px":null)[this.valueHTML()?n:a](s.value),this._textDiv.style("font-size",this.textFontSize_exists()?this.textFontSize()+"px":null)[this.labelHTML()?n:a](s.label);var l=this,p=this._mainDiv.selectAll(".more").data([s]);p.enter().append("div").attr("class","more").on("click",function(t){l.click(l.rowToObj(l.currentRow()),l.lookupFieldText("moreTextColumn")||"more",!0)}).each(function(e){var i=t.select(this);i.append("i"),i.append("span")}),p.style("font-size",this.moreFontSize_exists()?this.moreFontSize()+"px":null).transition().style("background-color",t.rgb(s.fill).darker(.75)),p.select("i").attr("class",function(t){return"fa "+t.moreIcon}),p.select("span")[this.moreTextHTML()?n:a](function(t){return t.moreText}),p.exit().remove()},o.prototype.exit=function(t,i){e.prototype.exit.apply(this,arguments)},o});