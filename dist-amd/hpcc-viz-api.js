// d3.tip
// Copyright (c) 2013 Justin Palmer
//
// Tooltips for d3.js SVG visualizations

!function(t,e){"function"==typeof define&&define.amd?define("src/api/I1DChart",["../common/Palette"],e):t.api_I1DChart=e(t.common_Palette)}(this,function(t){function e(){}return e.prototype._palette=t.rainbow("default"),e.prototype.click=function(t,e,o){console.log("Click:  "+JSON.stringify(t)+", "+e+", "+o)},e.prototype.dblclick=function(t,e,o){console.log("Double click:  "+JSON.stringify(t)+", "+e+", "+o)},e}),function(t,e){"function"==typeof define&&define.amd?define("src/api/I2DChart",["../common/Palette"],e):t.api_I2DChart=e(t.common_Palette)}(this,function(t){function e(){}return e.prototype._palette=t.ordinal("default"),e.prototype.click=function(t,e,o){console.log("Click:  "+JSON.stringify(t)+", "+e+", "+o)},e.prototype.dblclick=function(t,e,o){console.log("Double click:  "+JSON.stringify(t)+", "+e+", "+o)},e}),function(t,e){"function"==typeof define&&define.amd?define("src/api/IGraph",[],e):t.api_IGraph=e()}(this,function(){function t(){}return t.prototype.vertex_click=function(t,e,o,i){i&&i.vertex&&console.log("Vertex click: "+i.vertex.id())},t.prototype.vertex_dblclick=function(t,e,o,i){i&&i.vertex&&console.log("Vertex double click: "+i.vertex.id())},t.prototype.edge_click=function(t,e,o,i){i&&i.edge&&console.log("Edge click: "+i.edge.id())},t.prototype.edge_dblclick=function(t,e,o,i){i&&i.edge&&console.log("Edge double click: "+i.edge.id())},t}),function(t,e){"function"==typeof define&&define.amd?define("src/api/IInput",["../common/Widget"],e):t.api_IInput=e(t.common_Widget)}(this,function(t){function e(){t.call(this)}return e.prototype=Object.create(t.prototype),e.prototype.publish("name","","string","HTML name for the input"),e.prototype.publish("label","","string","Descriptive label"),e.prototype.publish("value","","string","Input Current Value"),e.prototype.publish("validate",null,"string","Input Validation"),e.prototype.isValid=function(){if(this.validate()){var t=new RegExp(this.validate());if(!t.test(this.value()))return!1}return!0},e.prototype.hasValue=function(){if("function"==typeof this.type){switch(this.type()){case"radio":case"checkbox":if(this.value()&&"false"!==this.value())return!0;break;default:if(this.value())return!0}return!1}return""!==this.value()},e.prototype.blur=function(t){},e.prototype.click=function(t){},e.prototype.dblclick=function(t){},e.prototype.change=function(t){},e.prototype.resetValue=function(t){t.value(t._inputElement[0].node().value)},e.prototype.disable=function(t){this._inputElement.forEach(function(e,o){e.attr("disabled",t?"disabled":null)})},e.prototype.setFocus=function(){this._inputElement.length&&this._inputElement[0].node().focus()},e}),function(t,e){"function"==typeof define&&define.amd?define("src/api/INDChart",["../common/Palette"],e):t.api_INDChart=e(t.common_Palette)}(this,function(t){function e(){}return e.prototype._palette=t.ordinal("default"),e.prototype.click=function(t,e,o){console.log("Click:  "+JSON.stringify(t)+", "+e+", "+o)},e.prototype.dblclick=function(t,e,o){console.log("Double click:  "+JSON.stringify(t)+", "+e+", "+o)},e}),function(t,e){"function"==typeof define&&define.amd?define("d3-tip",["d3"],e):"object"==typeof module&&module.exports?module.exports=function(t){return t.tip=e(t),t.tip}:t.d3.tip=e(t.d3)}(this,function(t){return function(){function e(t){k=h(t),T=k.createSVGPoint(),document.body.appendChild(x)}function o(){return"n"}function i(){return[0,0]}function n(){return" "}function l(){var t=m();return{top:t.n.y-x.offsetHeight,left:t.n.x-x.offsetWidth/2}}function r(){var t=m();return{top:t.s.y,left:t.s.x-x.offsetWidth/2}}function p(){var t=m();return{top:t.e.y-x.offsetHeight/2,left:t.e.x}}function a(){var t=m();return{top:t.w.y-x.offsetHeight/2,left:t.w.x-x.offsetWidth}}function s(){var t=m();return{top:t.nw.y-x.offsetHeight,left:t.nw.x-x.offsetWidth}}function c(){var t=m();return{top:t.ne.y-x.offsetHeight,left:t.ne.x}}function u(){var t=m();return{top:t.sw.y,left:t.sw.x-x.offsetWidth}}function f(){var t=m();return{top:t.se.y,left:t.e.x}}function d(){var e=t.select(document.createElement("div"));return e.style({position:"absolute",top:0,opacity:0,"pointer-events":"none","box-sizing":"border-box"}),e.node()}function h(t){return t=t.node(),"svg"===t.tagName.toLowerCase()?t:t.ownerSVGElement}function y(){return null===x&&(x=d(),document.body.appendChild(x)),t.select(x)}function m(){for(var e=w||t.event.target;"undefined"==typeof e.getScreenCTM&&"undefined"===e.parentNode;)e=e.parentNode;var o={},i=e.getScreenCTM(),n=e.getBBox(),l=n.width,r=n.height,p=n.x,a=n.y;return T.x=p,T.y=a,o.nw=T.matrixTransform(i),T.x+=l,o.ne=T.matrixTransform(i),T.y+=r,o.se=T.matrixTransform(i),T.x-=l,o.sw=T.matrixTransform(i),T.y-=r/2,o.w=T.matrixTransform(i),T.x+=l,o.e=T.matrixTransform(i),T.x-=l/2,T.y-=r/2,o.n=T.matrixTransform(i),T.y+=r,o.s=T.matrixTransform(i),o}var g=o,b=i,v=n,x=d(),k=null,T=null,w=null;e.show=function(){var t=Array.prototype.slice.call(arguments);t[t.length-1]instanceof SVGElement&&(w=t.pop());var o,i=v.apply(this,t),n=b.apply(this,t),l=g.apply(this,t),r=y(),p=C.length,a=document.documentElement.scrollTop||document.body.scrollTop,s=document.documentElement.scrollLeft||document.body.scrollLeft;for(r.html(i).style({opacity:1,"pointer-events":"all"});p--;)r.classed(C[p],!1);return o=I.get(l).apply(this),r.classed(l,!0).style({top:o.top+n[0]+a+"px",left:o.left+n[1]+s+"px"}),e},e.hide=function(){var t=y();return t.style({opacity:0,"pointer-events":"none"}),e},e.attr=function(o,i){if(arguments.length<2&&"string"==typeof o)return y().attr(o);var n=Array.prototype.slice.call(arguments);return t.selection.prototype.attr.apply(y(),n),e},e.style=function(o,i){if(arguments.length<2&&"string"==typeof o)return y().style(o);var n=Array.prototype.slice.call(arguments);return t.selection.prototype.style.apply(y(),n),e},e.direction=function(o){return arguments.length?(g=null==o?o:t.functor(o),e):g},e.offset=function(o){return arguments.length?(b=null==o?o:t.functor(o),e):b},e.html=function(o){return arguments.length?(v=null==o?o:t.functor(o),e):v},e.destroy=function(){return x&&(y().remove(),x=null),e};var I=t.map({n:l,s:r,e:p,w:a,nw:s,ne:c,sw:u,se:f}),C=I.keys();return e}}),define("css!src/api/ITooltip",[],function(){}),function(t,e){"function"==typeof define&&define.amd?define("src/api/ITooltip",["d3","d3-tip","../common/Widget","css!./ITooltip"],e):t.api_ITooltip=e(t.d3,t.d3.tip,t.common_Widget)}(this,function(t,e,o,i,n){function l(){if(o.call(this),this._valueFormatter=t.format(this.tooltipValueFormat()),this.layerEnter){var e=this.layerEnter;this.layerEnter=function(t,o,i){this.tooltipEnter(o),e.apply(this,arguments)};var i=this.layerUpdate;this.layerUpdate=function(t){i.apply(this,arguments),this.tooltipUpdate()};var n=this.layerExit;this.layerExit=function(t){n.apply(this,arguments),this.tooltipExit()}}else{var l=this.enter;this.enter=function(t,e){this.tooltipEnter(e),l.apply(this,arguments)};var r=this.update;this.update=function(t,e){r.apply(this,arguments),this.tooltipUpdate()};var p=this.exit;this.exit=function(t,e){p.apply(this,arguments),this.tooltipExit()}}}l.prototype=Object.create(o.prototype),l.prototype.publish("tooltipStyle","default","set","Style",["default","series-table","none"],{}),l.prototype.publish("tooltipFollowMouse",!1,"boolean","If true, the tooltip will follow mouse movement",null,{}),l.prototype.publish("tooltipValueFormat",",.2f","string","Value Format",null,{}),l.prototype.publish("tooltipSeriesColor","#EAFFFF","html-color","Series Color",null,{}),l.prototype.publish("tooltipLabelColor","#CCFFFF","html-color","Label Color",null,{}),l.prototype.publish("tooltipValueColor","white","html-color","Value Color",null,{}),l.prototype.publish("tooltipTick",!0,"boolean","Show tooltip tick",null,{}),l.prototype.publish("tooltipOffset",8,"number","Offset from the cursor",null,{}),l.prototype.tooltipEnter=function(t){var o=this;this.tooltip=e().attr("class","d3-tip").offset(function(t){if(event&&o.tooltipFollowMouse()){var e=document.querySelector(".d3-tip");return e.style.display="block",e.style.left=o.tooltipOffset()+event.clientX+"px",e.style.top=event.clientY+"px",[]}switch(o.tooltip.direction()()){case"e":return[0,o.tooltipOffset()];default:return[-o.tooltipOffset(),0]}}),t.call(this.tooltip)},l.prototype.tooltipUpdate=function(){var t=this.tooltip.attr("class");t=t.split(" notick").join("")+(this.tooltipTick()?"":" notick")+("none"===this.tooltipStyle()?" hidden":""),t=t.split(" ").filter(function(t){return 0!==t.indexOf("ITooltip-tooltipStyle-")}).join(" "),t+=" ITooltip-tooltipStyle-"+this.tooltipStyle(),this.tooltip.attr("class",t)},l.prototype.tooltipExit=function(){this.tooltip&&this.tooltip.destroy()};var r=l.prototype.tooltipValueFormat;return l.prototype.tooltipValueFormat=function(e){var o=r.apply(this,arguments);return arguments.length&&(this._valueFormatter=t.format(e)),o},l.prototype._tooltipHTML=function(t){return t},l.prototype.tooltipHTML=function(t){return this.tooltip.html(t)},l.prototype.tooltipFormat=function(t){switch(t=t||{},t.label=void 0===t.label?"":t.label,t.series=t.series||"",t.value instanceof Date?t.value=t.value||"":t.value=this._valueFormatter(t.value)||"",this.tooltipStyle()){case"none":break;case"series-table":var e='<table class="ITooltip-series-table"><thead><tr><th colspan="2">'+t.label+"</th></tr></thead><tbody>";return t.arr.forEach(function(t){e+="<tr>",e+="<td>",e+='<div class="series-table-row-color" style="background-color:'+t.color+'"></div>',e+='<div class="series-table-row-label">'+t.label+"</div>",e+="</td>",e+='<td><div class="series-table-row-value">'+t.value+"</div></td>",e+="</tr>"}),e+="</tbody>",e+="</table>";default:return t.series?"<span style='color:"+this.tooltipSeriesColor()+"'>"+t.series+"</span> / <span style='color:"+this.tooltipLabelColor()+"'>"+t.label+"</span>:  <span style='color:"+this.tooltipValueColor()+"'>"+t.value+"</span>":"<span style='color:"+this.tooltipLabelColor()+"'>"+t.label+"</span>:  <span style='color:"+this.tooltipValueColor()+"'>"+t.value+"</span>"}},l}),function(t,e){"function"==typeof define&&define.amd?define("src/api/ITree",["../common/Palette"],e):t.api_ITree=e(t.common_Palette)}(this,function(t){function e(){}return e.prototype._palette=t.ordinal("default"),e.prototype.click=function(t,e,o){console.log("Click:  "+JSON.stringify(t)+", "+e+", "+o)},e.prototype.dblclick=function(t,e,o){console.log("Double click:  "+JSON.stringify(t)+", "+e+", "+o)},e}),function(t){var e=document,o="appendChild",i="styleSheet",n=e.createElement("style");n.type="text/css",e.getElementsByTagName("head")[0][o](n),n[i]?n[i].cssText=t:n[o](e.createTextNode(t))}('.d3-tip,.d3-tip:after{line-height:1;pointer-events:none!important}.d3-tip{font-weight:700;padding:12px;background:rgba(0,0,0,.66);color:#fff;border-radius:2px;z-index:10}.d3-tip.hidden{visibility:hidden}.d3-tip:after{box-sizing:border-box;display:inline;font-size:10px;width:100%;color:rgba(0,0,0,.66);position:absolute}.d3-tip.n:after{content:"\\25BC";margin:-1px 0 0;top:100%;left:0;text-align:center}.d3-tip.e:after{content:"\\25C0";margin:-4px 0 0;top:50%;left:-8px}.d3-tip.s:after{content:"\\25B2";margin:0 0 1px;top:-8px;left:0;text-align:center}.d3-tip.w:after{content:"\\25B6";margin:-4px 0 0 -1px;top:50%;left:100%}.d3-tip.notick:after{content:""!important}.common_Widget .over{stroke:rgba(0,0,0,.66);opacity:.66}.d3-tip.ITooltip-tooltipStyle-series-table{padding:0}.d3-tip .ITooltip-series-table td,.d3-tip .ITooltip-series-table th{padding:6px;text-align:left;border:1px solid #d1d1d1}.d3-tip .ITooltip-series-table .series-table-row-color{display:inline-block;height:10px;width:10px;margin-right:10px}.d3-tip .ITooltip-series-table .series-table-row-label{display:inline-block}.d3-tip .ITooltip-series-table th{background-color:#b3b3b3}.d3-tip .ITooltip-series-table td{background-color:#fff;color:#555;font-weight:400}.d3-tip .ITooltip-series-table td:first-child{border-right:0}table.ITooltip-series-table td:last-child{border-left:1px dotted #a3a3a3}'),define("hpcc-viz-api",function(){});