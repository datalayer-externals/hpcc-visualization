!function(t,i){"function"==typeof define&&define.amd?define(["./HTMLWidget"],i):t.common_Image=i(t.common_HTMLWidget)}(this,function(t){function i(){t.call(this),this._drawStartPos="center"}return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype._class+=" common_Image",i.prototype.publish("source",null,"string","Image Source",null,{tags:["Basic"]}),i.prototype.publish("sizing","actual","set","Controls sizing mode",["actual","fit","custom"],{tags:["Basic"]}),i.prototype.publish("customWidth","50%","string","Applies this width to IMG element if 'sizing' is set to 'custom'",null,{tags:["Basic"],disable:function(t){return"custom"!==t.sizing()}}),i.prototype.publish("customHeight","20%","string","Applies this height to IMG element if 'sizing' is set to 'custom'",null,{tags:["Basic"],disable:function(t){return"custom"!==t.sizing()}}),i.prototype.publish("lockAspectRatio",!0,"boolean","Locks the aspect ratio when scaling/stretching",null,{tags:["Basic"],disable:function(t){return"fit"!==t.sizing()}}),i.prototype.publish("alignment","center","set","Image Alignment",["center","origin"],{tags:["Basic"]}),i.prototype.enter=function(i,e){t.prototype.enter.apply(this,arguments)},i.prototype.update=function(i,e){this._drawStartPos=this.alignment(),t.prototype.update.apply(this,arguments);var s=this,o=e.selectAll("img").data(this.source()?[this.source()]:[],function(t){return t});o.enter().append("img").attr("src",this.source()).on("load",function(t){o.style(s.calcSize())}),o.style(this.calcSize()),o.exit().remove()},i.prototype.calcSize=function(){var t={width:"auto",height:"auto"};switch(this.sizing()){case"fit":if(this.lockAspectRatio()){var i=this.element().select("img");i.style({width:"auto",height:"auto"});var e=i.node().getBoundingClientRect(),s=e.width/this.width(),o=e.height/this.height();s>o?(t.width=this.width()+"px",t.height=e.height/s+"px"):(t.width=e.width/o+"px",t.height=this.height()+"px")}else t.width=this.width()+"px",t.height=this.height()+"px";break;case"custom":t.width=this.customWidth(),t.height=this.customHeight()}return t},i.prototype.exit=function(i,e){t.prototype.exit.apply(this,arguments)},i});