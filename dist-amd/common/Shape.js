!function(t,e){"function"==typeof define&&define.amd?define(["d3","./SVGWidget","css!./Shape"],e):t.common_Shape=e(t.d3,t.common_SVGWidget)}(this,function(t,e){function r(){e.call(this)}return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype._class+=" common_Shape",r.prototype.publish("shape","circle","set","Shape Type",["circle","square","rect","ellipse"],{tags:["Private"]}),r.prototype.publish("width",24,"number","Width",null,{tags:["Private"]}),r.prototype.publish("height",24,"number","Height",null,{tags:["Private"]}),r.prototype.publish("colorStroke",null,"html-color","Stroke Color",null,{tags:["Private"]}),r.prototype.publish("colorFill",null,"html-color","Fill Color",null,{tags:["Private"]}),r.prototype.publish("radius",null,"number","Radius",null,{tags:["Private"]}),r.prototype.publish("tooltip","","string","Tooltip",null,{tags:["Private"]}),r.prototype._origRadius=r.prototype.radius,r.prototype.radius=function(t){var e=r.prototype._origRadius.apply(this,arguments);return arguments.length?(this.width(t),this.height(t),e):Math.max(this.width(),this.height())/2},r.prototype.intersection=function(t,r){switch(this.shape()){case"circle":return this.intersectCircle(t,r)}return e.prototype.intersection.apply(this,arguments)},r.prototype.update=function(e,r){var i=r.selectAll("rect,circle,ellipse").data([this.shape()],function(t){return t}),o=this;i.enter().append("square"===this.shape()?"rect":this.shape()).attr("class","common_Shape").each(function(e){var r=t.select(this);o._tooltipElement=r.append("title")}),i.style("fill",this.colorFill()).style("stroke",this.colorStroke()).each(function(e){var r=t.select(this);switch(o._tooltipElement.text(o.tooltip()),o.shape()){case"circle":var i=o.radius();r.attr("r",i);break;case"square":var a=Math.max(o.width(),o.height());r.attr("x",-a/2).attr("y",-a/2).attr("width",a).attr("height",a);break;case"rect":r.attr("x",-o.width()/2).attr("y",-o.height()/2).attr("width",o.width()).attr("height",o.height());break;case"ellipse":r.attr("rx",o.width()/2).attr("ry",o.height()/2)}}),i.exit().remove()},r});