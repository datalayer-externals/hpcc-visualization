!function(t,e){"function"==typeof define&&define.amd?define(["d3","c3","../common/HTMLWidget","css!c3"],e):t.c3chart_Common=e(t.d3,t.c3,t.common_HTMLWidget)}(this,function(t,e,n){function o(t){n.call(this);var e=this;this._tag="div",this._type="unknown",this._config={axis:{},legend:{position:"bottom",show:!0},data:{}},this._prevColumnIDs=[],this._config.data.onclick=function(t,n){e.click(e.rowToObj(e.data()[t.index]),t.id,e.c3Chart.selected().length>0)}}return o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype._class+=" c3chart_Common",o.prototype.publish("showLegend",!1,"boolean","Show/Hide Legend",null,{tags:["Basic","Shared"]}),o.prototype.publish("legendFontColor",null,"html-color","Legend Font Color",null,{tags:["Intermediate","Shared"]}),o.prototype.publish("legendFontSize",null,"number","Legend Font Size",null,{tags:["Intermediate","Shared"]}),o.prototype.publish("legendFontFamily",null,"string","Legend Font Name",null,{tags:["Private","Shared"]}),o.prototype.publish("legendFontBold",!1,"boolean","Legend Font Bold",null,{tags:["Private","Shared"]}),o.prototype.publish("legendFontItalic",!1,"boolean","Legend Font Italic",null,{tags:["Private","Shared"]}),o.prototype.publish("fontSize",null,"number","Font Size",null,{tags:["Basic","Shared"]}),o.prototype.publish("fontFamily",null,"string","Font Name",null,{tags:["Basic","Shared","Shared"]}),o.prototype.publish("fontColor",null,"html-color","Font Color",null,{tags:["Basic","Shared"]}),o.prototype.publish("legendPosition","right","set","Legend Position",["bottom","right"],{tags:["Intermediate"]}),o.prototype.publish("animationDuration",0,"number","Animation Duration",null,{tags:["Advanced"]}),o.prototype.type=function(t){return arguments.length?(this._type=t,this):this._type},o.prototype.getC3Series=function(){return this.columns().filter(function(t,e){return e>0})},o.prototype.getC3Rows=function(){var t=[this.columns().filter(function(t,e){return e>0})].concat(this.data().map(function(t){return t.filter(function(t,e){return e>0})}));return t},o.prototype.getC3Categories=function(){var t=this.data().map(function(t,e){return t[0]});return t},o.prototype.getC3Column=function(t){var e=[this.columns()[t]].concat(this.data().map(function(e,n){return e[t]}));return e},o.prototype.getC3Columns=function(t){if(!this.data().length)return[];t=t||this.columns().length;for(var e=[],n="function"==typeof this.xAxisType&&"time"===this.xAxisType()?0:1,o=n;t>o;++o)e.push(this.getC3Column(o));return e},o.prototype.enter=function(t,o){n.prototype.enter.apply(this,arguments),o.style("overflow","hidden"),this._config.size={width:this.width(),height:this.height()},this._config.transition={duration:this.animationDuration()},this._config.data.type=this._type,"gauge"!==this._type&&(this._config.legend={position:this.legendPosition()}),this._config.data.selection={enabled:!0,multiple:!1},this._config.bindto=o.append("div").datum(null),this._config.data.columns=[],this.c3Chart=e.generate(this._config)},o.prototype.update=function(t,e){n.prototype.update.apply(this,arguments),this.showLegend()?this.c3Chart.legend.show():this.c3Chart.legend.hide(),this.c3Chart.resize({width:this.width(),height:this.height()});var o=this.getChartOptions(),i=o.columns.map(function(t){return t[0]});o.unload=this._prevColumnIDs.filter(function(t){return i.indexOf(t)<0}),this.c3Chart.load(o),this._prevColumnIDs=i,e.selectAll(".c3 text").style({stroke:this.fontColor(),fill:this.fontColor(),"font-size":this.fontSize_exists()?this.fontSize()+"px":null,"font-family":this.fontFamily()}).attr("font-family",this.fontFamily()),e.selectAll(".c3 .c3-legend-item text").style({fill:this.legendFontColor(),"font-size":this.legendFontSize_exists()?this.legendFontSize()+"px":null,"font-family":this.legendFontFamily(),"font-weight":this.legendFontBold()?"bold":"normal","font-style":this.legendFontItalic()?"italic":"normal"}).attr("font-family",this.legendFontFamily())},o.prototype.getChartOptions=function(){return{}},o});