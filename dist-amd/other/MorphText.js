!function(t,e){"function"==typeof define&&define.amd?define(["../common/SVGWidget","css!./MorphText"],e):t.other_MorphText=e(t.common_SVGWidget)}(this,function(t){function e(){t.call(this)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype._class+=" other_MorphText",e.prototype.publish("anchor","middle","set","Sets anchor point",["middle"],{tags:["Basic"]}),e.prototype.publish("fontSize",14,"number","Sets fontsize",null,{tags:["Basic"]}),e.prototype.publish("reverse",!1,"boolean","Reverse Animation",null,{tags:["Basic"]}),e.prototype.publish("text","","string","Sets text/data of widget",null,{tags:["Basic"]}),e.prototype._origText=e.prototype.text,e.prototype.text=function(t){var n=e.prototype._origText.apply(this,arguments);if(arguments.length){var o={},i=t.split("");this.data(i.map(function(t){var e="_"+t;return void 0===o[e]&&(o[e]=0),o[e]++,{text:t,id:t.charCodeAt(0)+1024*o[e]}}))}return n},e.prototype.enter=function(t,e){if(!this.fontSize()){var n=window.getComputedStyle(t,null);this.fontSize(parseInt(n.fontSize))}this._fontWidth=32*this.fontSize()/48,this._textElement=e.append("g")},e.prototype.dateTime=function(){var t=new Date,e=1===t.getSeconds().toString().length?"0"+t.getSeconds():t.getSeconds(),n=1===t.getMinutes().toString().length?"0"+t.getMinutes():t.getMinutes(),o=1===t.getHours().toString().length?"0"+t.getHours():t.getHours(),i=t.getHours()>=12?"pm":"am",r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return a[t.getDay()]+" "+r[t.getMonth()]+" "+t.getDate()+" "+t.getFullYear()+" "+o+":"+n+":"+e+i},e.prototype.update=function(t,e){var n=this,o=this._textElement.selectAll("text").data(this.data(),function(t){return t.id});o.attr("class","update"),this.transition.apply(o).attr("x",function(t,e){return(-n.data().length/2+e)*n._fontWidth+n._fontWidth/2});var i=o.enter().append("text").attr("class","enter").attr("font-size",this.fontSize()).attr("dy",".35em").attr("y",(this.reverse()?1:-1)*this._fontWidth*2).attr("x",function(t,e){return(-n.data().length/2+e)*n._fontWidth+n._fontWidth/2}).style("fill-opacity",1e-6).style("text-anchor",this.anchor()).text(function(t){return t.text});this.transition.apply(i).attr("y",0).style("fill-opacity",1),o.exit().attr("class","exit"),this.transition.apply(o.exit()).attr("y",(this.reverse()?-1:1)*this._fontWidth*2).style("fill-opacity",1e-6).remove()},e});