!function(t,e){"function"==typeof define&&define.amd?define(["d3","../common/HTMLWidget","css!./RadioCheckbox"],e):t.other_RadioCheckbox=e(t.d3,t.common_HTMLWidget)}(this,function(t,e){function o(t){e.call(this)}return o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.prototype._class+=" other_RadioCheckbox",o.prototype.publish("label",null,"string","Label for RadioCheckbox"),o.prototype.publish("valueColumn",null,"set","RadioCheckbox display value",function(){return this.columns()},{optional:!0}),o.prototype.publish("textColumn",null,"set","RadioCheckbox value(s)",function(){return this.columns()},{optional:!0}),o.prototype.publish("sort",null,"set","Sort contents",["","ascending","descending"],{optional:!0}),o.prototype.publish("multiple",!1,"boolean","Multiple selection"),o.prototype.rcData=function(){var t=this._db.rollupView([this.textColumn(),this.valueColumn()]),e=[];if(e=e.concat(t.entries().map(function(t){return{text:t.key,value:t.values.length?t.values[0].key:"",origRow:t.values.length&&t.values[0].values.length?t.values[0].values[0]:[]}},this)),this.sort_exists()){var o="descending"===this.sort();e.sort(function(t,e){return t.text<e.text?o?1:-1:t.text>e.text?o?-1:1:0})}return e},o.prototype.enter=function(t,o){e.prototype.enter.apply(this,arguments),this._span=o.append("span"),this._label=this._span.append("label").attr("for",this.id()+"_radioCheckbox"),this._Checkbox=this._span.append("div").attr("id",this.id()+"_radioCheckbox")},o.prototype.update=function(o,i){e.prototype.update.apply(this,arguments);var n=this;this._label.text(this.label());var a=this._Checkbox.selectAll(".dataRow").data(this.rcData());a.enter().append("div").attr("class","dataRow").each(function(e,o){var i=t.select(this),a=n.id()+"_checkbox_"+o;i.append("input").attr("id",a).attr("name",n.id()+"_radioCheckbox").on("change",function(t){n.handleClick()}),i.append("label").attr("for",a)}),a.each(function(e,o){var i=t.select(this);i.select("input").attr("type",n.multiple()?"checkbox":"radio").attr("value",e.value),i.select("label").text(e.text)}),a.exit().remove(),a.order()},o.prototype.exit=function(t,o){this._span.remove(),e.prototype.exit.apply(this,arguments)},o.prototype.handleClick=function(){var e=[];this._Checkbox.selectAll(".dataRow > input").each(function(o,i){var n=t.select(this);n.property("checked")&&o&&o.origRow&&e.push(o.origRow)}),e.length?this.click(this.rowToObj(e[0]),this.valueColumn(),!0):this.click([],this.valueColumn(),!1)},o.prototype.click=function(t,e,o){console.log("Click:  "+JSON.stringify(t)+", "+e+", "+o)},o});