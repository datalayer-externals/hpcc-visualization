!function(t,e){"function"==typeof define&&define.amd?define(["d3","../common/HTMLWidget","./Paginator","../common/Utility","../common/Widget","css!./Table"],e):t.other_Table=e(t.d3,t.common_HTMLWidget,t.other_Paginator,t.common_Utility,t.common_Widget)}(this,function(t,e,o,i,l){function n(){e.call(this),this._tag="div",this.columns([]),this._paginator=new o,this._selectionBag=new i.Selection,this._selectionPrevClick=null,this._paginatorTableSpacing=4}function s(t,e){return e instanceof l?"Widget with class: "+e.classID():e}n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype._class+=" other_Table",n.prototype.publish("renderHtmlDataCells",!1,"boolean","enable or disable HTML within cells",null,{tags:["Private"]}),n.prototype.publish("pagination",!0,"boolean","Enable or disable pagination",null,{tags:["Private"]}),n.prototype.publish("paginationLimit",null,"number","Maximum number of rows allowed before pagination defaults to on",null,{tags:["Private"]}),n.prototype.publishProxy("itemsPerPage","_paginator"),n.prototype.publishProxy("pageNumber","_paginator","pageNumber",1),n.prototype.publishProxy("adjacentPages","_paginator"),n.prototype.publish("topN",null,"number","Total number or rows of data to be displayed in the table",null,{tags:["Private"]}),n.prototype.publish("pivot",!1,"boolean","Pivot Table"),n.prototype.publish("showHeader",!0,"boolean","Show or hide the table header",null,{tags:["Private"]}),n.prototype.publish("fixedHeader",!0,"boolean","Enable or disable fixed table header",null,{tags:["Private"]}),n.prototype.publish("fixedColumn",!1,"boolean","Enable or disable fixed first column",null,{tags:["Private"]}),n.prototype.publish("multiSelect",!1,"boolean","Multiple Selection",null,{tags:["Basic"]}),n.prototype.publish("fixedSize",!1,"boolean","Fix Size to Min Width/Height"),n.prototype.publish("quickUpdateOnClick",!1,"boolean","Avoid calling update on row select/deselect",null,{tags:["Private"]}),n.prototype.publish("hideEmptyColumns",!1,"boolean","Hide columns with all empty cells"),n.prototype.publish("theadFontSize",null,"string","Table head font size",null,{tags:["Basic"],optional:!0}),n.prototype.publish("tbodyFontSize",null,"string","Table body font size",null,{tags:["Basic"],optional:!0}),n.prototype.publish("tfootFontSize",null,"string","Table body font size",null,{tags:["Basic"],optional:!0}),n.prototype.publish("theadFontColor",null,"html-color","Table head font color",null,{tags:["Basic"],optional:!0}),n.prototype.publish("tbodyFontColor",null,"html-color","Table body font color",null,{tags:["Basic"],optional:!0}),n.prototype.publish("tfootFontColor",null,"html-color","Table body font color",null,{tags:["Basic"],optional:!0}),n.prototype.publish("theadFontFamily",null,"string","Table head font family",null,{tags:["Basic"],optional:!0}),n.prototype.publish("tbodyFontFamily",null,"string","Table body font family",null,{tags:["Basic"],optional:!0}),n.prototype.publish("tfootFontFamily",null,"string","Table body font family",null,{tags:["Basic"],optional:!0}),n.prototype.publish("theadCellBorderColor",null,"html-color","Table head cell border color",null,{tags:["Basic"],optional:!0}),n.prototype.publish("tfootCellBorderColor",null,"html-color","Table head cell border color",null,{tags:["Basic"],optional:!0}),n.prototype.publish("theadRowBackgroundColor",null,"html-color","Table head row color",null,{tags:["Basic"],optional:!0}),n.prototype.publish("tfootRowBackgroundColor",null,"html-color","Table head row color",null,{tags:["Basic"],optional:!0}),n.prototype.publish("tbodyCellBorderColor",null,"html-color","Table body cell border color",null,{tags:["Basic"],optional:!0}),n.prototype.publish("tbodyRowBackgroundColor",null,"html-color","Table body row color",null,{tags:["Basic"],optional:!0}),n.prototype.publish("tbodyFirstColFontColor",null,"html-color","Table body first column font color",null,{tags:["Basic"],optional:!0}),n.prototype.publish("tbodyFirstColBackgroundColor",null,"html-color","Table body first column background color",null,{tags:["Basic"],optional:!0}),n.prototype.publish("tbodyHoverRowFontColor",null,"html-color","Table body hover row font color",null,{tags:["Basic"],optional:!0}),n.prototype.publish("tbodyHoverRowBackgroundColor",null,"html-color","Table body hover row background color",null,{tags:["Basic"],optional:!0}),n.prototype.publish("tbodySelectedRowFontColor",null,"html-color","Table body selected row color",null,{tags:["Basic"],optional:!0}),n.prototype.publish("tbodySelectedRowBackgroundColor",null,"html-color","Table body selected row color",null,{tags:["Basic"],optional:!0}),n.prototype.publish("tableZebraColor",null,"html-color","Table zebra row color",null,{tags:["Basic"],optional:!0}),n.prototype.publish("totalledColumns",[],"array","Array of indices of the columns to be totalled",null,{tags:["Basic"],optional:!0,disable:function(t){return t.pivot()}}),n.prototype.publish("totalledLabel",null,"string","Adds a label to the first column of the 'Totalled' row",null,{tags:["Basic"],optional:!0,disable:function(t){return t.pivot()}}),n.prototype.publish("hiddenColumns",[],"array","Array of indices of the columns to be hidden",null,{tags:["Basic"],optional:!0,disable:function(t){return t.pivot()}}),n.prototype.publish("stringAlign","left","set","Cell alignment for strings",["left","right","center"],{tags:["Basic"],optional:!0}),n.prototype.publish("numberAlign","right","set","Cell alignment for numbers",["left","right","center"],{tags:["Basic"],optional:!0}),n.prototype.publish("verticalAlign",null,"set","Cell vertical alignment",[null,"middle","top","bottom"],{tags:["Basic"],optional:!0}),n.prototype.publish("minWidgetWidth",320,"number","Minimum width of a child widget",null,{tags:["Basic"],optional:!0}),n.prototype.publish("minWidgetHeight",240,"number","Minimum height of a child widget",null,{tags:["Basic"],optional:!0}),n.prototype.publish("sortByFieldIndex",null,"number","Index for the field/column to sort the data",null,{tags:["Basic"],optional:!0}),n.prototype.publish("descending",!1,"boolean","Direction for sorting the data: ascending (true) or descending (false)",null,{tags:["Basic"],optional:!0}),n.prototype.size=function(t){var o=e.prototype.size.apply(this,arguments);if(arguments.length&&this.tableDiv){var i=this.showHeader()&&this.fixedHeader()?this.thead.property("offsetHeight"):0;this.tableDiv.style("width",this._size.width+"px").style("height",this._size.height-i+"px"),this._element.style("width",this._size.width+"px").style("height",this._size.height+"px")}return o},n.prototype.isHidden=function(t){if(this.pivot())return!1;if(-1!==this.hiddenColumns().indexOf(t))return!0;var e=this.fields();return e&&e[t]&&("hidden"===e[t].type()||-1!==this._tempHidden.indexOf(t))?!0:!1},n.prototype.tableColumns=function(t){var e=n.prototype.columns.apply(this,arguments);return!arguments.length&&this.pivot()?this._db.column(0):e},n.prototype.tableData=function(t){var e=n.prototype.data.apply(this,arguments);return!arguments.length&&this.pivot()?this._db.columns().filter(function(t,e){return e>0}):e};var r={transform:function(t){return t}};return n.prototype.field=function(t,e){return this.pivot()?0===e?r:this.fields()[t+1]:-1===t?r:this.fields()[e]},n.prototype.calcFieldsIndex=function(t){for(var e=-1,o=0,i=this.columns().length,l=0;i>e&&t>=l;)e++,this.isHidden(e)?o++:l++;return t+o},n.prototype.getEmptyColumnIdxArr=function(t,e){var o=[];if(this.hideEmptyColumns())for(var i=0;i<t.length;i++){for(var l=!0,n=0;n<e.length;n++)if(-1===["",null,void 0].indexOf(e[n][i])){l=!1;break}l&&o.push(i)}return o},n.prototype.enter=function(t,o){e.prototype.enter.apply(this,arguments),this._parentElement.style("overflow","hidden"),this.tableDiv=o.append("div").attr("class","tableDiv"),this.table=this.tableDiv.append("table"),this.fixedHead=o.append("div").classed("header-wrapper",!0),this.fixedHeadTable=this.fixedHead.append("table"),this.fixedThead=this.fixedHeadTable.append("thead").append("tr"),this.unfixedThead=this.table.append("thead").append("tr"),this.tbody=this.table.append("tbody"),this.tfoot=this.table.append("tfoot").append("tr"),this.fixedCol=o.append("div").classed("rows-wrapper",!0),this.fixedColTable=this.fixedCol.append("table"),this.fixedColHead=this.fixedColTable.append("thead"),this.fixedColHeadRow=this.fixedColHead.append("tr"),this.fixedColBody=this.fixedColTable.append("tbody"),this.fixedColFoot=this.fixedColTable.append("tfoot"),this.fixedColFootRow=this.fixedColFoot.append("tr"),this.tableDiv.style("overflow","auto")},n.prototype.update=function(o,n){function s(){var t=O.width;z=a.tbody.property("offsetWidth")+1,D=t>z?z:t,D=D}function r(){W=a.tbody.property("offsetHeight")+T,W=W}e.prototype.update.apply(this,arguments);var a=this,d=a.tableColumns(),h=a.tableData(),p=this.tableDiv.node().scrollLeft;this._tempHidden=this.getEmptyColumnIdxArr(d,h),this.element().selectAll("table,tbody,th,td").style("width",null),!this.sortByFieldIndex_exists()||this._prevSortByFieldIndex===this.sortByFieldIndex()&&this._prevDescending===this.descending()||(i.multiSort(h,[{idx:this.sortByFieldIndex(),reverse:this.descending()}]),this._prevSortByFieldIndex=this.sortByFieldIndex(),this._prevDescending=this.descending()),this._hasChildWidgets=!1,this.fixedHeader()?this.thead=this.fixedThead:this.thead=this.unfixedThead,this.fixedHead.style("display",this.fixedHeader()?"table-row":"none"),this.unfixedThead.style("display",this.fixedHeader()?"none":"table-row");var c=this.thead.selectAll("th").data(this.showHeader()?d.filter(function(t,e){return!a.isHidden(e)}):[]);if(c.enter().append("th").each(function(e){var o=t.select(this);o.append("span").attr("class","thText"),o.append("span").attr("class","thIcon")}).on("click",function(t,e){a.headerClick(t,e,this)}),c.style("background-color",this.theadRowBackgroundColor()).style("border-color",this.theadCellBorderColor()).style("color",this.theadFontColor()).style("font-size",this.theadFontSize()),c.select(".thText").style("font-family",this.theadFontFamily()).text(function(t,e){var o=a.calcFieldsIndex(e);return a.field(-1,o).transform(t)}),c.select(".thIcon").text(function(t,e){return a.descending()?a.sortByFieldIndex()===e?"":"":a.sortByFieldIndex()===e?"":""}),c.exit().remove(),c.order(),this.paginationLimit()&&this.pagination(h.length>=parseInt(this.paginationLimit())?!0:!1),this.pagination()){null===this._paginator.target()&&this._paginator.target(n.node());var u=this._calcRowsPerPage(c);this.itemsPerPage(u),this._paginator.numItems(h.length),this._tNumPages=Math.ceil(this._paginator.numItems()/this.itemsPerPage())||1,(this.pageNumber()>this._tNumPages||this.pageNumber()<=0)&&this.pageNumber(1),this._paginator._onSelect=function(t,e){a.pageNumber(t),a.render()}}else this._paginator.numItems(0);var f=this.pageNumber()-1,y=this.itemsPerPage(),g=f*y,b=parseInt(f*y)+parseInt(y),m=null;m=this.topN()?h.slice(0,this.topN()):this.pagination()?h.slice(g,b):h;var v=[this.totalledLabel()?this.totalledLabel():null];if(0!==this.totalledColumns().length){for(var x=0;x<this.totalledColumns().length;x++)this.totalledColumns()[x]=+this.totalledColumns()[x];for(var w=1;w<d.length;w++){var C=0;if(-1!==this.totalledColumns().indexOf(w)){for(var _=0;_<m.length;_++)C+=m[_][w];v.push(C)}else v.push("")}var B=this.tfoot.selectAll("td").data(v);B.enter().append("td"),B[this.renderHtmlDataCells()?"html":"text"](function(t,e){return a.fields()[e].transform(t)}),B.exit().remove(),B.style("background-color",this.tfootRowBackgroundColor()).style("border-color",this.tfootCellBorderColor()).style("color",this.tfootFontColor()).style("font-size",this.tfootFontSize())}var S=this.tbody.selectAll("tr.tr_"+this.id()).data(m.map(function(t,e){for(var o=0;o<t.length;++o)void 0===t[o]&&(t[o]=null);return{rowIdx:e,row:t}}));S.enter().append("tr").attr("class","tr_"+this.id()).on("click.selectionBag",function(t){if(t.row){var e=t.row,o=t.rowIdx;a.selectionBagClick(e,o),a.applyRowStyles(a.getBodyRow(o)),a.applyFirstColRowStyles(a.getFixedRow(o))}},!0).on("mouseover",function(t){if(t.row){var e=t.rowIdx,o=a.getFixedRow(e);o.empty()||o.classed("hover",!0);var i=a.getBodyRow(e);i.classed("hover",!0),a.applyStyleToRows(i),a.applyFirstColRowStyles(o)}}).on("mouseout",function(t){if(t.row){var e=t.rowIdx,o=a.getFixedRow(e);o.classed("hover",!1);var i=a.getBodyRow(e);i.classed("hover",!1),a.applyStyleToRows(i),a.applyFirstColRowStyles(o)}}),S.classed("selected",function(t){var e=t.row;return a._selectionBag.isSelected(a._createSelectionObject(e))}).classed("trId"+this._id,!0),S.exit().remove(),this.applyStyleToRows(S);var H=S.selectAll(".td_"+this.id()).data(function(t,e){return t.row.filter(function(t,e){return e<d.length&&!a.isHidden(e)}).map(function(e,o){return{rowInfo:t,colIdx:o,cell:e}})});H.enter().append("td").attr("class","td_"+this.id()).on("click",function(t){t.rowInfo&&a.click(a.rowToObj(t.rowInfo.row),a.columns()[t.colIdx],a._selectionBag.isSelected(a._createSelectionObject(t.rowInfo.row)))}).on("dblclick",function(t,e){t.rowInfo&&a.dblclick(a.rowToObj(t.rowInfo.row),a.columns()[t.colIdx],a._selectionBag.isSelected(a._createSelectionObject(t.rowInfo.row)))}).each(function(e,o){var i=a.getColumnAlignment(e.rowInfo.rowIdx,e.colIdx,e.cell),l=t.select(this);l.style({height:null,"text-align":i,"vertical-align":a.verticalAlign()}).classed("tr-"+e.rowInfo.rowIdx+"-td-"+o,!0)}),H.each(function(e){var o=t.select(this);if(e.cell instanceof l){o[a.renderHtmlDataCells()?"html":"text"](null);var i=o.selectAll(".div_"+a.id()).data([e.cell],function(t){return t.id()});i.exit().each(function(t){t.target(null)}).remove(),i.enter().append("div").attr("class","div_"+a.id()).style({width:a.minWidgetWidth()+"px",height:a.minWidgetHeight()+"px"}).each(function(e){var o=t.select(this);e._parentWidget=a,e._class.indexOf("childWidget")<0&&(e._class="childWidget "+e._class),e.target(null).target(o.node())}),i.each(function(t){t.resize().lazyRender(),a._hasChildWidgets=!0})}else{o.selectAll(".div_"+a.id()).remove();var n=a.calcFieldsIndex(e.colIdx);o[a.renderHtmlDataCells()?"html":"text"](a.field(e.rowInfo.rowIdx,n).transform(e.cell))}}),H.exit().remove();var T=parseInt(this.thead.node().offsetHeight);this.pagination()&&this._hasChildWidgets?(this.tableDiv.style("overflow-y","auto"),this.table.style("margin-bottom","50px"),console.log("Warning: displaying another widget in the table may cause problems with pagination")):(this.tableDiv.style("overflow-y",null),this.table.style("margin-bottom",null)),this.size(this._size);var F=0,I=this.fixedColHeadRow.selectAll("th").data(this.fixedColumn()&&this.showHeader()?[d[0]]:[]);I.enter().append("th").each(function(e){var o=t.select(this);o.append("span").attr("class","thText"),o.append("span").attr("class","thIcon")}).on("click",function(t,e){a.headerClick(t,e,this)}),I.style("background-color",this.theadRowBackgroundColor()).style("border-color",this.theadCellBorderColor()).style("color",this.theadFontColor()).style("font-size",this.theadFontSize()),I.select(".thText").style("font-family",this.theadFontFamily()).text(function(t){return t}),I.select(".thIcon").text(function(t,e){return a.descending()?a.sortByFieldIndex()===e?"":"":a.sortByFieldIndex()===e?"":""}),I.exit().remove();var k=this.fixedColBody.selectAll("tr").data(this.fixedColumn()?m:[]);k.enter().append("tr").attr("class",function(){return"trId"+a._id}),k.on("click",function(e,o){t.select(S[0][o]).on("click.selectionBag")(S.data()[o],o)}).on("mouseover",function(e,o){t.select(S[0][o]).on("mouseover")(S.data()[o],o)}).on("mouseout",function(e,o){t.select(S[0][o]).on("mouseout")(S.data()[o],o)}).classed("selected",function(t){return a._selectionBag.isSelected(a._createSelectionObject(t))}),k.exit().remove();var R=k.selectAll("td").data(function(t,e){return[t[0]]});R.enter().append("td"),R[this.renderHtmlDataCells()?"html":"text"](function(t){return"string"==typeof t?t.trim():"number"==typeof t?t:""}),R.exit().remove();var A=this.fixedColFootRow.selectAll("td").data(this.fixedColumn()&&this.totalledLabel()?[this.totalledLabel()]:[]);if(A.enter().append("td"),A[this.renderHtmlDataCells()?"html":"text"](function(t){return"string"==typeof t?t.trim():"number"==typeof t?t:""}),A.exit().remove(),this.fixedColumn()&&!this.fixedSize()&&R.length&&(F=this.showHeader()?R.property("offsetWidth")>I.property("offsetWidth")?R.property("offsetWidth"):I.property("offsetWidth"):R.property("offsetWidth"),this.fixedCol.style("position","absolute").style("margin-top",-this.tableDiv.property("scrollTop")+T+"px"),R.style("width",F+"px"),this.fixedColHead.style("position","absolute").style("margin-top",(this.fixedHeader()?this.tableDiv.property("scrollTop"):0)-T+"px"),I.style("width",F+"px"),S.each(function(e,o){var i=t.select(this).select("td").property("offsetHeight");t.select(R[o][0]).style("height",i+"px")})),this.table.style("margin-left",-F+"px"),this.tableDiv.style("margin-left",F+"px").style("width",this.width()-F+"px"),S.empty()||this.setColumnWidths(S),this.fixedSize()){var P=t.select(".tableDiv > table").node();if(P){var W,D,z,O=P.getBoundingClientRect();0!==O.width&&0!==O.height?(s(),r()):(O.height-T<=a.tableDiv.property("offsetHeight")?r():a.fixedHeader()?(W=a.property("offsetHeight"),W+="px"):W="100%",O.width-F<a.tableDiv.property("offsetWidth")?s():a.fixedColumn()?(D=a.property("offsetWidth")-F,D+="px"):D="100%"),n.classed("childWidget")&&(a._parentElement.style("width",D+"px").style("height",W+"px"),a.tableDiv.style("overflow","hidden")),a.size({width:D,height:W})}}this.setOnScrollEvents(this.tableDiv.node(),T),this._paginator.render(),setTimeout(function(){a._paginator.right((a.hasVScroll(n)?a.getScrollbarWidth():0)+a._paginatorTableSpacing).bottom((a.hasHScroll(n)?a.getScrollbarWidth():0)+a._paginatorTableSpacing).render(function(){a.tableDiv.node().scrollLeft=p})},0)},n.prototype.exit=function(t,o){this._paginator.target(null),e.prototype.exit.apply(this,arguments)},n.prototype.setColumnWidths=function(e){var o=this,i=e.filter(function(t,e){return 0===e}),l=[];i.each(function(e){l=t.selectAll(this.childNodes)});var n=this.fixedHeader()?this.thead.property("offsetHeight"):0,s=1,r={};l.each(function(t,e){r[e]=this.offsetWidth});var a=this.thead.selectAll("th");a.each(function(t,e){var o=this.offsetWidth,i=l.empty()?0:r[e],n=o>=i?o:i;this.style.width=n+"px",!l.empty()&&l[0][e]&&(l[0][e].style.width=n+"px"),s+=n}),this.thead.style("position",this.fixedHeader()?"absolute":"relative").style("width",s+"px").style("margin-top","0px"),this.table.style("width",s+"px"),this.tableDiv.style("margin-top",(o.fixedHeader()?n:0)+"px"),this.tbody.style("width",s+"px")},n.prototype.getBodyRow=function(t){return this.table.selectAll("tbody tr.trId"+this._id).filter(function(e,o){return o===t})},n.prototype.getFixedRow=function(t){return this._element.selectAll(".rows-wrapper tbody tr").filter(function(e,o){return o===t})},n.prototype.setOnScrollEvents=function(t,e){var o=this;t.onscroll=function(t){var i=t.target.scrollTop,l=t.target.scrollLeft;o.fixedHeader()&&o.thead.style("margin-left",-l+"px"),o.fixedColumn()&&(o.fixedCol.style("margin-top",-i+e+"px"),o.fixedHeader()&&o.fixedColHead.style("margin-top",i-e+"px"))}},n.prototype._generateTempRow=function(){var t=this.tbody.append("tr");return t.append("td").text("QQQ"),t},n.prototype._createSelectionObject=function(e){var o=this;return{_id:e,element:function(){return o.tbody?o.tbody.selectAll("tr").filter(function(t){return t===e}):t.select()}}},n.prototype._calcRowsPerPage=function(t){0===this._paginator.numItems()&&(this._paginator.numItems(1),this.itemsPerPage(1)),this._paginator.render();var e=this.thead.selectAll("th").node()?this.thead.selectAll("th").node().clientHeight:0,o=this.tfoot.selectAll("td").node()?this.tfoot.selectAll("td").node().clientHeight:0,i=this._generateTempRow(),l=i.node().clientHeight;i.remove();var n=this.calcHeight(this._paginator.element()),s=Math.floor((this.height()-e-o-n-(this.table.style("width")>=this.table.style("width")?this.getScrollbarWidth():0)-2*this._paginatorTableSpacing)/l)||1;return 0!==this.totalledColumns().length&&(s-=1),s},n.prototype.sort=function(t){return this.sortByFieldIndex()!==t?this.descending(!1):this.descending(!this.descending()),this.sortByFieldIndex(t),this},n.prototype.selection=function(t){return arguments.length?(this._selectionBag.set(t.map(function(t){return this._createSelectionObject(t)},this)),this):this._selectionBag.get().map(function(t){return t._id})},n.prototype.selectionBagClick=function(e,o){if(this.multiSelect()&&t.event.shiftKey&&this._selectionPrevClick){var i=!1,l=[],n=this.tableData().filter(function(t,o){var n=!1;return(t===e||t===this._selectionPrevClick)&&(i&&(n=!0),i=!i,l.push(o)),i||n},this);this.selection(n)}else if(this.multiSelect())this._selectionBag.click(this._createSelectionObject(e),t.event),this._selectionPrevClick=e;else{var s=this._createSelectionObject(e);this._selectionBag.click(s,{ctrlKey:this._selectionBag.isSelected(s)}),this._selectionPrevClick=e}if(this.quickUpdateOnClick()){var r=this;this.tbody.selectAll("tr.tr_"+this.id()).classed("selected",function(t){return r._selectionBag.isSelected(r._createSelectionObject(t.row))}).classed("trId"+this._id,!0)}else this.render()},n.prototype.applyHoverRowStyles=function(t){var e=this;t.style("color",e.tbodyHoverRowFontColor()).style("background-color",e.tbodyHoverRowBackgroundColor())},n.prototype.applySelectedRowStyles=function(t){var e=this;t.style("color",e.tbodySelectedRowFontColor()).style("background-color",e.tbodySelectedRowBackgroundColor())},n.prototype.applyRowStyles=function(t,e){var o=t.datum().row;t.style("color",e?this.tbodyFirstColFontColor():this.tbodyFontColor()).style("background-color",e?this.tbodyFirstColBackgroundColor():this.tableZebraColor_exists()&&this.tableData().indexOf(o)%2?this.tbodyRowBackgroundColor():this.tableZebraColor())},n.prototype.applyFirstColRowStyles=function(t){this.applyStyleToRows(t,!0)},n.prototype.applyStyleToRows=function(e,o){o="undefined"!=typeof o?o:!1;var i=this;e.each(function(){var e=t.select(this);e.classed("hover")?i.applyHoverRowStyles(e):e.classed("selected")?i.applySelectedRowStyles(e):i.applyRowStyles(e,o)})},n.prototype.getColumnAlignment=function(t,e,o){var i=this.calcFieldsIndex(e),l=this.field(t,i);switch(l.__prop_type){case"string":return this.stringAlign();case"number":return this.numberAlign();case"":case void 0:switch(typeof o){case"string":return this.stringAlign();case"number":return this.numberAlign()}}return null},n.prototype.serializeState=function(){return{selection:this._selectionBag.get().map(function(t){return t._id}),data:this.data()}},n.prototype.deserializeState=function(t){if(t){if(t.selection){var e=this;this._selectionBag.set(t.selection.map(function(t){return e._createSelectionObject(t)}))}t.data&&this.data(t.data)}return this},n.prototype.click=function(t,e,o){console.log("click:  "+JSON.stringify(t,s)+", "+e+","+o)},n.prototype.dblclick=function(t,e,o){console.log("dblclick:  "+JSON.stringify(t,s)+", "+e+","+o)},n.prototype.headerClick=function(t,e,o){var i=this.tableDiv.node(),l=o.getBoundingClientRect(),n=l.width,s=l.left;this.sort(e).render(function(){setTimeout(function(){var t=o.getBoundingClientRect(),e=t.width,l=t.left,r=l-s,a=e-n;i.scrollLeft+=r+a},0)})},n});