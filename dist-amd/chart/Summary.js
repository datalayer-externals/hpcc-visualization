!function(t,o){"function"==typeof define&&define.amd?define(["d3","../common/HTMLWidget","../api/I2DChart","css!font-awesome","css!./Summary"],o):t.chart_Summary=o(t.d3,t.common_HTMLWidget,t.api_I2DChart)}(this,function(t,o,e){function i(){o.call(this),this._tag="div",this._drawStartPos="center",this.playInterval(this.playInterval()),this._playIntervalIdx=0}var l="text",n="html";i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype["implements"](e.prototype),i.prototype._class+=" chart_Summary",i.prototype.publish("iconColumn",null,"set","Select Icon Column",function(){return this.columns()},{optional:!0}),i.prototype.publish("icon","fa-briefcase","string","FA Char icon class",null,{disable:function(t){return t.iconColumn()}}),i.prototype.publish("headerFontSize",null,"number","headerFontSize",null,{optional:!0}),i.prototype.publish("textFontSize",null,"number","textFontSize",null,{optional:!0}),i.prototype.publish("moreFontSize",null,"number","moreFontSize",null,{optional:!0}),i.prototype.publish("iconFontSize",null,"number","iconFontSize",null,{optional:!0}),i.prototype.publish("hideLabel",!1,"boolean","Hide label column"),i.prototype.publish("labelColumn",null,"set","Select display value",function(){return this.columns()},{optional:!0,disable:function(t){return t.hideLabel()}}),i.prototype.publish("labelHTML",!1,"boolean","Allow HTML",null,{disable:function(t){return t.hideLabel()}}),i.prototype.publish("valueColumn",null,"set","Select display value",function(){return this.columns()},{optional:!0}),i.prototype.publish("valueHTML",!1,"boolean","Allow HTML"),i.prototype.publish("hideMore",!1,"boolean","Hide More Information"),i.prototype.publish("moreIconColumn",null,"set","Select More Icon Column",function(){return this.columns()},{optional:!0,disable:function(t){return t.hideMore()}}),i.prototype.publish("moreIcon","fa-info-circle","string","FA Char icon class",null,{disable:function(t){return t.hideMore()||t.moreIconColumn()}}),i.prototype.publish("moreTextColumn",null,"set","Select display value",function(){return this.columns()},{optional:!0,disable:function(t){return t.hideMore()}}),i.prototype.publish("moreText","More Info","string","More text",null,{disable:function(t){return t.hideMore()||t.moreTextColumn()}}),i.prototype.publish("moreTextHTML",!1,"boolean","Allow HTML",null,{disable:function(t){return t.hideMore()}}),i.prototype.publish("colorFillColumn",null,"set","Column for color",function(){return this.columns()},{optional:!0}),i.prototype.publish("colorFill","#3498db","html-color","Fill Color",null,{disable:function(t){return t.colorFillColumn()}}),i.prototype.publish("colorStrokeColumn",null,"set","Column for color",function(){return this.columns()},{optional:!0}),i.prototype.publish("colorStroke","#ffffff","html-color","Fill Color",null,{disable:function(t){return t.colorStrokeColumn()}}),i.prototype.publish("fixedSize",!0,"boolean","Fix Size to Min Width/Height"),i.prototype.publish("minWidth",225,"number","Minimum Width"),i.prototype.publish("minHeight",150,"number","Minimum Height"),i.prototype.publish("playInterval",null,"number","Play Interval",null,{optional:!0});var r=i.prototype.playInterval;return i.prototype.playInterval=function(t){var o=r.apply(this,arguments);if(arguments.length){this._playIntervalHandle&&clearInterval(this._playIntervalHandle);var e=this;t&&(this._playIntervalHandle=setInterval(function(){e._playIntervalIdx++,e._renderCount&&e.data().length&&e.render()},t))}return o},i.prototype.lookupFieldIdx=function(t,o){var e=o;if(!(this[t+"_exists"]()&&(e=this.columns().indexOf(this[t]()),0>e)))return e},i.prototype.lookupFieldText=function(t,o){return this[t+"_exists"]()?this[t]():void 0!==o?this.columns()[o]||"":""},i.prototype.currentRow=function(){return this.data()[this._playIntervalIdx]},i.prototype.summaryData=function(){var t;this.hideLabel()||(t=this.lookupFieldIdx("labelColumn",0));var o,e,i=this.lookupFieldIdx("iconColumn"),l=this.lookupFieldIdx("valueColumn",1);this.hideMore()||(o=this.lookupFieldIdx("moreIconColumn"),e=this.lookupFieldIdx("moreTextColumn"));var n=this.lookupFieldIdx("colorFillColumn"),r=this.lookupFieldIdx("colorStrokeColumn");return this.formattedData().map(function(s){return{icon:void 0===i?this.icon():s[i],label:void 0===t?"":s[t],value:s[l],moreIcon:void 0===o?this.hideMore()?"":this.moreIcon():s[o],moreText:void 0===e?this.hideMore()?"":this.moreText():s[e],fill:void 0===n?this.colorFill():s[n],stroke:void 0===r?this.colorStroke():s[r]}},this)},i.prototype.enter=function(t,e){o.prototype.enter.apply(this,arguments),this._mainDiv=e.append("div");var i=this;this._headerDiv=this._mainDiv.append("h2").on("click",function(t){i.click(i.rowToObj(i.currentRow()),i.lookupFieldText("valueColumn",1),!0)}).on("dblclick",function(t){i.dblclick(i.rowToObj(i.currentRow()),i.lookupFieldText("valueColumn",1),!0)}),this._textDiv=this._mainDiv.append("div").attr("class","text").on("click",function(t){i.click(i.rowToObj(i.currentRow()),i.lookupFieldText("labelColumn",0),!0)}).on("dblclick",function(t){i.dblclick(i.rowToObj(i.currentRow()),i.lookupFieldText("labelColumn",0),!0)})},i.prototype.update=function(e,i){o.prototype.update.apply(this,arguments),this.data().length;var r=this.summaryData();this._playIntervalIdx>=r.length&&(this._playIntervalIdx=0);var s=this._playIntervalIdx<r.length?r[this._playIntervalIdx]:["",""];i.style({width:this.fixedSize()?this.minWidth_exists()?this.minWidth()+"px":null:"100%",height:this.fixedSize()?this.minHeight_exists()?this.minHeight()+"px":null:"100%"}),this._mainDiv.attr("class","content bgIcon "+s.icon).transition().style({"background-color":s.fill,color:s.stroke,"min-width":this.minWidth_exists()?this.minWidth()+"px":null,"min-height":this.minHeight_exists()?this.minHeight()+"px":null,"font-size":this.iconFontSize_exists()?this.iconFontSize()+"px":null}),this._headerDiv.transition().style("color",s.stroke).style("font-size",this.headerFontSize_exists()?this.headerFontSize()+"px":null)[this.valueHTML()?n:l](s.value),this._textDiv.style("font-size",this.textFontSize_exists()?this.textFontSize()+"px":null)[this.labelHTML()?n:l](s.label);var u=this,a=this._mainDiv.selectAll(".more").data([s]);a.enter().append("div").attr("class","more").on("click",function(t){u.click(u.rowToObj(u.currentRow()),u.lookupFieldText("moreTextColumn")||"more",!0)}).each(function(o){var e=t.select(this);e.append("i"),e.append("span")}),a.style("font-size",this.moreFontSize_exists()?this.moreFontSize()+"px":null).transition().style("background-color",t.rgb(s.fill).darker(.75)),a.select("i").attr("class",function(t){return"fa "+t.moreIcon}),a.select("span")[this.moreTextHTML()?n:l](function(t){return t.moreText}),a.exit().remove()},i.prototype.exit=function(t,e){o.prototype.exit.apply(this,arguments)},i});