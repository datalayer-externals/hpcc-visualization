!function(t,i){"function"==typeof define&&define.amd?define(["d3","../layout/Grid","./HipieDDLMixin"],i):t.marshaller_HTML=i(t.d3,t.layout_Grid,t.marshaller_HipieDDLMixin)}(this,function(t,i,e){function o(){i.call(this),e.call(this),this.surfacePadding_default(0)}return o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.mixin(e),o.prototype._class+=" marshaller_HTML",o.prototype.populateContent=function(){var t=0,i=0,e=3;this._ddlDashboards.forEach(function(o){var r=Math.floor(Math.sqrt(o.visualizations.length));o.visualizations.forEach(function(o){if(o.newWidgetSurface){for(;null!==this.getCell(t*e,i*e);)i++,i%r===0&&(t++,i=0);this.setContent(t*e,i*e,o.newWidgetSurface,"",e,e)}},this)},this);var o={};this.content().forEach(function(t){var i=t.widget();i&&"layout_Surface"===i.classID()&&(i=i.widget()),i&&(o[i.id()]=t)}),this._ddlDashboards.forEach(function(t){t.visualizations.forEach(function(t,i){if(!t.properties.flyout&&!t.parentVisualization){var e=t.events.getUpdatesVisualizations(),r=e.filter(function(t){return o[t.id]}).map(function(t){return o[t.id].id()});o[t.id].indicateTheseIds(r)}})},this)},o.prototype.enter=function(t,e){i.prototype.enter.apply(this,arguments)},o.prototype.render=function(t){return this._marshallerRender(i.prototype,t),this},o.prototype.commsError=function(t,i){alert("Comms Error:\n"+t+"\n"+i)},o});