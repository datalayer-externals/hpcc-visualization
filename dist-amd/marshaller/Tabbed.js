!function(t,e){"function"==typeof define&&define.amd?define(["d3","../layout/Tabbed","../layout/Grid","./HipieDDLMixin"],e):t.marshaller_Tabbed=e(t.d3,t.layout_Tabbed,t.layout_Grid,t.marshaller_HipieDDLMixin)}(this,function(t,e,i,n){function o(){e.call(this),n.call(this),this.surfacePadding_default(0)}return o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.prototype.mixin(n),o.prototype._class+=" marshaller_Tabbed",o.prototype.content=function(){var t=[];return this.widgets().forEach(function(e){var i=e.widget();i.content().forEach(function(e){t.push(e)})}),t},o.prototype.populateContent=function(){var t=3;this._ddlDashboards.forEach(function(e){var n=(new i).surfacePadding(0);this.addTab(n,e.dashboard.title);var o=0,r=0,a=Math.floor(Math.sqrt(e.visualizations.length));e.visualizations.forEach(function(e){if(e.newWidgetSurface){for(;null!==n.getCell(o*t,r*t);)r++,r%a===0&&(o++,r=0);n.setContent(o*t,r*t,e.newWidgetSurface,"",t,t)}},this)},this);var e={};this.content().forEach(function(t){var i=t.widget();i&&"layout_Surface"===i.classID()&&(i=i.widget()),i&&(e[i.id()]=t)}),this._ddlDashboards.forEach(function(t){t.visualizations.forEach(function(t,i){if(!t.properties.flyout&&!t.parentVisualization){var n=t.events.getUpdatesVisualizations(),o=n.filter(function(t){return e[t.id]}).map(function(t){return e[t.id].id()});e[t.id].indicateTheseIds(o)}})},this)},o.prototype.enter=function(t,i){e.prototype.enter.apply(this,arguments)},o.prototype.render=function(t){return this._marshallerRender(e.prototype,t),this},o.prototype.commsError=function(t,e){alert("Comms Error:\n"+t+"\n"+e)},o});