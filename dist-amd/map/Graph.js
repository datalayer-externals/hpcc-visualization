!function(t,e){"function"==typeof define&&define.amd?define(["d3","topojson","./Pins","../graph/Graph","../graph/Edge","../common/Shape","css!./Graph"],e):t.map_Graph=e(t.d3,t.topojson,t.map_Pins,t.graph_Graph,t.graph_Edge,t.common_Shape)}(this,function(t,e,a,r,s,o){function p(){a.call(this)}return p.prototype=Object.create(a.prototype),p.prototype.constructor=p,p.prototype._class+=" map_Graph",p.prototype.data=function(t){var e=a.prototype.data.apply(this,arguments);if(arguments.length){this.dataEdges=[];var r=null;t.forEach(function(t){r&&this.dataEdges.push({type:"LineString",coordinates:[[r[1],r[0]],[t[1],t[0]]]}),r=t},this)}return e},p.prototype.layerEnter=function(e,r,s){a.prototype.layerEnter.apply(this,arguments),r.append("defs").append("marker").attr("class","marker").attr("id",this._id+"_arrowHead").attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerWidth",16).attr("markerHeight",16).attr("markerUnits","strokeWidth").attr("orient","auto").append("polyline").attr("points","0,0 10,5 0,10 1,5"),this._edgesTransform=r.append("g"),this.edgesPaths=t.select(null)},p.prototype.layerUpdate=function(t){a.prototype.layerUpdate.apply(this,arguments),this._edgesTransform.style("opacity",this.opacity()),this.edgesPaths=this._edgesTransform.selectAll(".dataEdge").data(this.visible()?this.dataEdges:[]),this.edgesPaths.enter().append("path").attr("class","dataEdge").attr("marker-end","url(#"+this._id+"_arrowHead)"),this.edgesPaths.attr("d",t._d3GeoPath),this.edgesPaths.exit().remove()},p.prototype.layerZoomed=function(t){a.prototype.layerZoomed.apply(this,arguments),this._edgesTransform.attr("transform","translate("+t._zoom.translate()+")scale("+t._zoom.scale()+")").style("stroke-width",.5/t._zoom.scale()+"px")},p});