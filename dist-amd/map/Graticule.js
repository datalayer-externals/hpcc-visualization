!function(t,e){"function"==typeof define&&define.amd?define(["d3","topojson","./Layer","../common/Palette","css!./Graticule"],e):t.map_Graticule=e(t.d3,t.topojson,t.map_Layer,t.common_Palette)}(this,function(t,e,o,a){function i(){o.call(this),this._dataMap={},this._path=t.select(null)}return i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype._class+=" map_Graticule",i.prototype.publish("opacity",1,"number","Opacity",null,{tags:["Advanced"]}),i.prototype.publish("meshColor",null,"html-color","Stroke Color",null,{optional:!0}),i.prototype.publish("meshStrokeWidth",.25,"number","Stroke Width"),i.prototype.layerEnter=function(e,a,i){o.prototype.layerEnter.apply(this,arguments),this._graticule=t.geo.graticule(),this._graticulePath=a.append("path").datum(this._graticule).attr("class","graticule"),this._graticuleOutlinePath=a.append("path").datum(this._graticule.outline).attr("class","graticuleOutline")},i.prototype.layerUpdate=function(t){return this.visible()?(this._prevProjection!==t.projection()&&(this._graticulePath.attr("d",t._d3GeoPath),this._graticuleOutlinePath.attr("d",t._d3GeoPath),this._prevProjection=t.projection()),this._graticulePath.style("stroke",this.meshColor()),void this._graticuleOutlinePath.style("stroke",this.meshColor())):(this._graticulePath.attr("d",""),this._graticuleOutlinePath.attr("d",""),void delete this._prevProjection)},i.prototype.layerExit=function(t){delete this._prevProjection},i.prototype.layerZoomed=function(t){this._graticulePath.style("opacity",this.opacity()).attr("transform","translate("+t._zoom.translate()+")scale("+t._zoom.scale()+")").style("stroke-width",this.meshStrokeWidth()/t._zoom.scale()+"px"),this._graticuleOutlinePath.style("opacity",this.opacity()).attr("transform","translate("+t._zoom.translate()+")scale("+t._zoom.scale()+")").style("stroke-width",this.meshStrokeWidth()/t._zoom.scale()+"px")},i});