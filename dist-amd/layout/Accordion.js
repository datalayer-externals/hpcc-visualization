!function(t,e){"function"==typeof define&&define.amd?define(["../common/HTMLWidget","../common/FAChar","css!./Accordion"],e):t.layout_Accordion=e(t.common_HTMLWidget,t.common_FAChar)}(this,function(t,e){function o(){t.call(this),this._tag="div",this._isClosed=!1}return o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.prototype._class+=" layout_Accordion",o.prototype.publish("content",[],"widgetArray","Array of widgets",null,{tags:["Basic"]}),o.prototype.publish("title","","string","Title of collapsible section",null,{tags:["Private"]}),o.prototype.publish("openIcon","","string","Icon to display when list is open",null,{tags:["Private"]}),o.prototype.publish("closedIcon","","string","Icon to display when list is closed",null,{tags:["Private"]}),o.prototype.publish("titleFontColor","#FFFFFF","html-color","Title font color",null,{tags:["Private"]}),o.prototype.publish("titleBackgroundColor","#333333","html-color","Title background color",null,{tags:["Private"]}),o.prototype.publish("defaultCollapsed",!1,"boolean","Collapsed by default if true",null,{tags:["Private"]}),o.prototype.pushListItem=function(t,e,o){var i=this.content();return t._protected=o,e?i.unshift(t):i.push(t),this.content(i),this},o.prototype.clearListItems=function(){var t=[];for(var e in this.content())this.content()[e]._protected&&t.push(this.content()[e]);return this.content(t),this},o.prototype.collapseClick=function(t){t.classed("closed")?(this._isClosed=!1,t.classed("open",!0),t.classed("closed",!1)):(this._isClosed=!0,t.classed("open",!1),t.classed("closed",!0))},o.prototype.enter=function(o,i){t.prototype.enter.apply(this,arguments);var s=this;this._isClosed=this.defaultCollapsed(),i.classed(this._isClosed?"closed":"open",!0),this.titleSpan=i.append("span").classed("collapsible-title",!0),this.iconDiv=i.append("div").classed("collapsible-icon",!0),this.ul=i.append("ul"),this.icon=(new e).size({height:24,width:24}).target(this.iconDiv.node()),this.iconDiv.on("click",function(){s.collapseClick(i),s.render()}),this.titleSpan.on("click",function(){s.collapseClick(i),s.render()})},o.prototype.update=function(e,o){t.prototype.update.apply(this,arguments);var i=this,s="";this.titleSpan.text(i.title().length>0?i.title()+s:"Accordion ["+i._id+"]"+s);var n=this.ul.selectAll("#"+i._id+" > ul > li").data(this.content(),function(t){return t._id});n.enter().append(function(t){var e=document.createElement("li");if(null!==t._target)return t._target;var o=t.size();if(0===o.width||0===o.height){var s=i.size();t.size({width:s.width,height:s.width})}return t.target(e),e}),n.exit().remove(),this.icon.text_colorFill(this.titleFontColor())["char"](this._isClosed?this.closedIcon():this.openIcon()).render()},o.prototype.exit=function(e,o){t.prototype.exit.apply(this,arguments)},o});