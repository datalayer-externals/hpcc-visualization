!function(t,e){"function"==typeof define&&define.amd?define(["d3","../common/HTMLWidget","../layout/Surface","../common/Text","css!./Tabbed"],e):t.layout_Tabbed=e(t.d3,t.common_HTMLWidget,t.layout_Surface,t.common_Text)}(this,function(t,e,i,n){function a(){e.call(this),this._tag="div"}return a.prototype=Object.create(e.prototype),a.prototype.constructor=a,a.prototype._class+=" layout_Tabbed",a.prototype.publish("showTabs",!0,"boolean","Show Tabs",null,{}),a.prototype.publish("surfacePadding",4,"number","Padding"),a.prototype.publish("activeTabIdx",0,"number","Index of active tab",null,{}),a.prototype.publish("labels",[],"array","Array of tab labels sharing an index with ",null,{tags:["Private"]}),a.prototype.publish("tabLocation","top","set","Position the tabs at the bottom of the widget",["top","bottom"],{tags:["Private"]}),a.prototype.publish("widgets",[],"widgetArray","widgets",null,{tags:["Private"]}),a.prototype.clearTabs=function(){return this.labels([]),this.widgets([]),this},a.prototype.addTab=function(t,e,a,o){var s=t.size();0===s.width&&0===s.height&&t.size({width:"100%",height:"100%"});var r=this.labels(),d=this.widgets();a&&this.activeTabIdx(this.widgets().length),r.push(e);var c=(new i).widget(t?t:(new n).text("No widget defined for tab"));return d.push(c),this.labels(r),this.widgets(d),o&&o(c),this},a.prototype.widgetSize=function(t){var e=this.clientWidth(),i=this.clientHeight(),n=this._tabContainer.node().getBoundingClientRect();return"undefined"!=typeof n.height&&(i-=n.height),{width:e,height:i}},a.prototype.enter=function(t,i){e.prototype.enter.apply(this,arguments),this._tabContainer=i.append("div"),this._contentContainer=i.append("div")},a.prototype.update=function(i,n){e.prototype.update.apply(this,arguments);var a=this;n.style("padding",this.surfacePadding_exists()?this.surfacePadding()+"px":null);var o=this._tabContainer.selectAll(".tab-button.id"+this.id()).data(this.showTabs()?this.labels():[],function(t){return t});o.enter().append("span").attr("class","tab-button id"+this.id()).style("cursor","pointer").on("click",function(t,e){a.click(a.widgets()[e].widget(),t,e),a.activeTabIdx(e).render()}),o.classed("active",function(t,e){return a.activeTabIdx()===e}).text(function(t){return t}),o.exit().remove();var s=this._contentContainer.selectAll(".tab-content.id"+this.id()).data(this.widgets(),function(t){return t.id()});switch(s.enter().append("div").attr("class","tab-content id"+this.id()).each(function(t,e){t.target(this)}),s.classed("active",function(t,e){return a.activeTabIdx()===e}).style("display",function(t,e){return a.activeTabIdx()===e?"block":"none"}).each(function(e,i){if(e.visible(a.activeTabIdx()===i),a.activeTabIdx()===i){var n=a.widgetSize(t.select(this));e.surfaceBorderWidth(a.showTabs()?null:0).surfacePadding(a.showTabs()?null:0).resize(n)}}),s.exit().each(function(t,e){t.target(null)}).remove(),this.tabLocation()){case"bottom":this._tabContainer.attr("class","on_bottom").style("top",this._contentContainer.node().offsetHeight+this.surfacePadding()+"px").style("position","absolute"),this._contentContainer.style("top",this.surfacePadding_exists()?this.surfacePadding()+"px":null).style("position","absolute");break;default:this._tabContainer.attr("class","on_top").style("top",null).style("position","relative"),this._contentContainer.style("top",this._tabContainer.node().offsetHeight+this.surfacePadding()+"px").style("position","absolute")}},a.prototype.click=function(t,e,i){},a});